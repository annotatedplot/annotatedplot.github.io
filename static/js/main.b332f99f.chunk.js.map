{"version":3,"sources":["img/outlier.png","img/correlation.png","img/cluster.png","benchmark sync /^/.//.*//origin/.json$","benchmark sync /^/.//.*//flat/.json$","vis/dataloader.js","vis/visualization/facttype.js","vis/visualization/aggtype.js","vis/fact.js","vis/visualization/marktype.js","vis/visualization/size.js","vis/visualization.js","vis/actions/action.js","vis/actions/dataprocess.js","vis/charts/chart.js","vis/visualization/color.js","vis/charts/barchart/index.js","vis/charts/linechart/index.js","vis/charts/scatterplot/index.js","vis/charts/unitvis/unit.js","vis/charts/unitvis/index.js","vis/actions/addchart.js","vis/visualization/annotationtype.js","vis/actions/annotations/annotator.js","vis/actions/annotations/arrow.js","vis/actions/annotations/coloredarea.js","vis/actions/annotations/circle.js","vis/actions/annotations/contour.js","vis/actions/annotations/cluster.js","vis/actions/annotations/fill.js","vis/actions/annotations/desaturate.js","vis/actions/annotations/distribution.js","vis/actions/annotations/ellipse.js","vis/actions/annotations/fade.js","vis/actions/annotations/glow.js","vis/actions/annotations/hide.js","vis/actions/annotations/label.js","vis/actions/annotations/line.js","vis/actions/annotations/point.js","vis/actions/annotations/reference.js","vis/actions/annotations/regression.js","vis/actions/annotations/separate.js","vis/actions/annotations/show.js","vis/actions/annotations/symbol.js","vis/actions/annotations/texture.js","vis/actions/annotations/tip.js","vis/actions/addannotation.js","vis/actions/addencoding.js","vis/actions/modifyencoding.js","vis/actions/removeencoding.js","vis/pipeline.js","vis/parser.js","vis/narrativechart.js","gallery/Chart.js","gallery/index.js","serviceWorker.js","index.js"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","DataLoader","this","_data","_schema","spec","Promise","reject","numericalFields","numerical","schema","filter","d","type","field","data","values","forEach","i","key","indexOf","parseFloat","d3","url","then","bind","catch","error","FactType","Association","Categorization","Difference","Distribution","Extreme","Outlier","Proportion","Rank","Trend","Value","Fact","_factdata","_type","_measure","_subspace","_breakdown","_parameter","_focus","value","measure","subspace","breakdown","focus","parameter","length","schemaDict","column","subtype","pictype","isPostCode","x","factdata","aggregate","console","log","fact","y","items","k1","k2","xx","yy","xy","item","Lxx","Lyy","Lxy","Math","sqrt","pearson","categories","Array","from","Set","sort","a","b","focusItem","find","restItems","yEncoding","seriesData","pieData","toFixed","ret","X","Y","sumX","sumY","sumXY","sumXSq","N","m","getLeastSquares","apply","index","filteredData","fs","push","abs","Number","extremeItem","maxValue","minValue","extremeFocus","hasOwnProperty","includes","value1","value2","max","min","valueNoRange1","valueNoRange2","max1","min1","sub","measures","breakdowns","aggdata","agg","aggdata1","aggdata2","JSON","parse","stringify","breakdownfields","element1","element2","assign","aggdata3","element3","columns","concat","AggregationType","sum","avg","count","entries","series","calculateData","sumData","fill","categoryData","sumRows","countData","countRows","MarkType","BAR","LINE","POINT","UNIT","Size","LARGE","WIDE","MIDDLE","SMALL","Visualization","_container","_fact","_processedData","_size","_width","_height","_mark","_chart","_caption","_pipeline","pipeline","operate","stop","Action","_target","vis","DataProcess","_select","_groupby","_filter","row","f","processedData","selectCols","s","selects","groupbys","groupbyCols","g","aggCols","reduce","res","col","result","obj","recordName","tempObj","record","aggFuncRouter","colData","aggFunc","toLowerCase","Chart","document","createElement","_svg","append","_xScale","_yScale","_rxScale","_ryScale","selectAll","remove","channel","Color","mode","lightMode","BACKGROUND","DIVIDER","AXIS","TITLE","TEXT","ANNOTATION","DEFAULT","CATEGORICAL","SEQUENTIAL","DIVERGING","darkMode","BarChart","margin","width","height","container","attr","drawAxis","encodeXY","encodeColor","svg","triangleSize","ceil","axis","select","fontsize","text","size","factData","xEncoding","categoriesData","category","xScale","range","domain","padding","yScale","nice","content","axisX","axisY","ticks","tickSize","tickPadding","tickFormat","call","node","getBBox","enter","bandwidth","colorEncoding","stackData","join","LineChart","line","circleSize","factKey","Scatterplot","color","encodeSize","sizeEncoding","maxR","minR","scale","Unit","_id","_x","_y","_radius","_color","_visible","_opacity","_unitgroup","_dataItem","Unitvis","delay","duration","colorduration","sizeduration","units","initvis","unit","vwidth","maxSet","setLength","maxRow","floor","maxColumn","radius","initX","initY","visible","j","baseX","baseY","breakdownField","databreakdown","rollup","v","bar","breakdownValue","maxCount","wradius","hradius","visibleUnits","barUnits","transition","iBar","opacity","unitgroup","textSize","xField","yField","xValueFreq","yValueFreq","xbar","ybar","xValue","yValue","ymax","xunit","yuint","xmaxCount","leftPadding","yset","sizeField","num_of_x","num_of_y","averageradius","ratio","nodesmaxcount","MaxNodeinEach","rowTotalWidth","radiusa","Minleftpadding","columnTotalHeight","centernodex","centernodey","unitnew","nodesvalue1","distribution","unitExtent","force","strength","tick","colorField","colorFreqValue","colorValue","colorUnits","iColor","textSizef","fontSize","fontFamily","span","offsetWidth","offsetHeight","style","visibility","display","body","appendChild","textContent","innerText","window","getComputedStyle","strlen","strmax","leftpadding","rightpadding","allcenter","xcenter","ycenter","nodesradius","focusextent1","nodesScale","iterations","changesize","changecolor","changelayout","encodeX","encodeY","AddChart","mark","chart","_mark2chart","clear","visualize","Annotator","target","Arrow","focus_elements","empty","arrow_points","nodes","one_element","data_x","data_y","offset","nodeName","getAttribute","new_arrow_points","point","Band","prototype","moveToFront","each","parentNode","selected","circleR","circleX","circleY","rectX","rectY","Circle","Contour","Cluster","indexOfMax","indexOfMin","errorEllipse","stdDevX","stdDevY","cor","center","level","aspectRatio","cov","covmat","eig","numeric","jStat","chisquare","inv","maxLambdaI","lambda","minLambdaI","rx","ry","theta","atan","pow","PI","clustered_items","colors","tooltip_id","Tooltip","html","xs","ys","focus_element","__data__","p","computed_parameter","compute","xExtent","yExtent","cx","cy","rotation","undefined","on","corrcoeff","ar","Fill","Desaturate","positions","isNaN","line_generator","curve","Ellipse","angle","rxScale","ryScale","Fade","Glow","feMerge","Hide","Label","formatData","data_d","offset_y","bbox","Line","pr","pvalue","relationship_text","x1","y1","x2","y2","Point","outlier_probability","Reference","x_axis_bbox","x_lower_bound","x_upper_bound","getAverageValue","points","Regression","y_axis_bbox","y_lower_bound","y_upper_bound","x_ymin","x_ymax","Infinity","Separate","Show","Symbol","size_icon","Texture","config","Tip","AddAnnotation","_method","method","_style","annotator","_type2annotator","annotate","AnnotationType","Coloredarea","AddEncoding","addEncoding","ModifyEncoding","modifyEncoding","RemoveEncoding","removeEncoding","Pipeline","_actions","_timeouts","action","delayTime","actions","setTimeout","clearTimeout","Parser","_parsedData","dataspec","factspec","focus_target","actionspecs","actionspec","actions_to_add","isArray","submethod","subactionspec","add","NarrativeChart","_paragraph","_loader","_vis","_spec","_shouldShowCaption","parser","load","loaded","process","run","reason","props","outlier_checkbox","setState","showOutlier","checked","renderChart","cluster_checkbox","showCluster","correlation_checkbox","showCorrelation","replay","state","newSpec","annotations","slice","annotation","generate","line_count","point_count","cluster_count","summary_text","panel","showPanel","float","alt","src","require","verticalAlign","marginLeft","marginTop","onClick","chartwidth","flexDirection","alignItems","justifyContent","backgroundColor","border","borderWidth","Component","Gallery","handleChange","clickPrev","clickNext","random","event","parseInt","randomNum","flat_spec","flatview","plot_options","paddingLeft","paddingTop","paddingBottom","textAlign","fontWeight","onChange","React","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.b332f99f.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAABYCAYAAAAuhL99AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAiKADAAQAAAABAAAAWAAAAAAXG39xAAAEuklEQVR4Ae2dsU/cMBTG4wtshYGOpaA73douLB3K1i5U6sSI1Hahf0bp31GpperMUqks7QZDFxa6HneCwlgG1A3u0vfo3cnk4tjJ5WIn/lhwbCe2f+9T/D6Q4iDADwiAAAiAAAiAAAiAAAiAAAiAAAiAAAiAAAiAAAiAAAiAAAiAAAiAAAiAAAiAQAqBP+324mmzuZXSpfSmRukjYsBEAuft9vLffv8wiqIvZ63Wm8ROFiqFhTExZIzA72bz8SCK9qMgeHDbJMQ1BebFaq/3Pda19EsIpHTkdwekLeU5CWMviKKFOy1CXIVBsP6w1zu+U1/yBbaYkoHLww23kv0JcXCnKFrktwpvPfI9ZZchkLKJD8c7bbV2BoPBR8o55lRT4C2n3+/vc/Kq6jPreghk1oRjz4/W1uZpW9mNBoN3sabESxLQI0peXyY2llCJHKQEyKMh+E1Awd6joD8b1aX+pmS1IcTblW73U2q/GTZCIDOEKz+acwneLviNINcry5SkUnA2bTsZCEQZoeIaJmys5tEUlAt6c2zYdjA8TeQgmmBN28w2th8Eh5xwGj1LiONwbu6JC+Lg+UIgRlHL1ynVxiY8UgjxYyEM15c7nfOEZitVEMiMsJvYWHlo2lZ2V5aWNu53Oldyve0ycpCCI8A29uzy8gMlo69MHy0ajfer3e6Oaf8y+0EgBdLOZWMbje2Vk5PdAqdR6KMgkIJwVtXG6pYPgegIGbRX2cbqlockVUdI0z60sQemNpacyi+XbKxmebC5OkBp7ZKNNfpnGtvYe2H41CUbm7Y+bsMbREdI0V4XG6tY3rgaOcgYhVmhbjZWt2oIREdIas9lYy3/N1aafq4iBGKIra42Vrd8CERHiNrrbGN1y0eSqiFUdxurWT5cTBogH2xs2vq5DW8QBSFfbKxi+eNq5CBjFP8LvtnY2PInLiEQCYmPNlZafmIRAhli8dXGJqpCqoRACIbPNlbSQmLR+yTVdxubqAqp0muBwMZKSlAUvRUIbKxCEbFq73IQ2NiYAjSXXgkENlajhoRmbwQCG5sQfYMqLwQCG2ugBEWX2iepsLGKyBtW11ogsLGGKkjpVluBwMamRD1DU+1yENjYDNE36ForgcDGGkQ8Y5faCAQ2NmPkDbvXQiCwsYbRztGt8kkqbGyOqGe4pdICgY3NEOmcXSsrENjYnBHPeFvlchDY2IwRnrJ7pQQCGztltHPcXhmBwMbmiG4Bt1RCILCxBUQ65yOcT1JhY3NGtqDbnBYI21j69tc3PlzHZL1V/MSTybps9nFWICMbS+KYNwFEe6WTXyo2mbvLfZzLQWBj3ZKLUwKBjXVLHDwbZwQCG+ueOJwRCGysm+LgWVlPUmFj3RWHdYHAxrotDqsCoTfHFp8ba2xjhfjs4oE77od4uhla22Lom+Vf+cP2JtO/PXCn13stjo6uTfqjT3EErLqYW+dyc/NTeVKCA+fGFoe6mk+yKhBGxg6GToU8mPhzuiPnxlYzrMXN2toWM1oCH/9JKt2k7eZmVEfXF2EQrNs+VHg0H59/WxcIw2chkEC2ucx5SZUO3OE546ckAuxs+M/tJQ2HYUAABEAABEAABEAABEAABEAABGpH4B9J4rEOedzdZAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,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\"","var map = {\n\t\"./1/origin.json\": 80,\n\t\"./10/origin.json\": 81,\n\t\"./100/origin.json\": 82,\n\t\"./11/origin.json\": 83,\n\t\"./12/origin.json\": 84,\n\t\"./13/origin.json\": 85,\n\t\"./14/origin.json\": 86,\n\t\"./15/origin.json\": 87,\n\t\"./16/origin.json\": 88,\n\t\"./17/origin.json\": 89,\n\t\"./18/origin.json\": 90,\n\t\"./19/origin.json\": 91,\n\t\"./2/origin.json\": 92,\n\t\"./20/origin.json\": 93,\n\t\"./21/origin.json\": 94,\n\t\"./22/origin.json\": 95,\n\t\"./23/origin.json\": 96,\n\t\"./24/origin.json\": 97,\n\t\"./25/origin.json\": 98,\n\t\"./26/origin.json\": 99,\n\t\"./27/origin.json\": 100,\n\t\"./28/origin.json\": 101,\n\t\"./29/origin.json\": 102,\n\t\"./3/origin.json\": 103,\n\t\"./30/origin.json\": 104,\n\t\"./31/origin.json\": 105,\n\t\"./32/origin.json\": 106,\n\t\"./33/origin.json\": 107,\n\t\"./34/origin.json\": 108,\n\t\"./35/origin.json\": 109,\n\t\"./36/origin.json\": 110,\n\t\"./37/origin.json\": 111,\n\t\"./38/origin.json\": 112,\n\t\"./39/origin.json\": 113,\n\t\"./4/origin.json\": 114,\n\t\"./40/origin.json\": 115,\n\t\"./41/origin.json\": 116,\n\t\"./42/origin.json\": 117,\n\t\"./43/origin.json\": 118,\n\t\"./44/origin.json\": 119,\n\t\"./45/origin.json\": 120,\n\t\"./46/origin.json\": 121,\n\t\"./47/origin.json\": 122,\n\t\"./48/origin.json\": 123,\n\t\"./49/origin.json\": 124,\n\t\"./5/origin.json\": 125,\n\t\"./50/origin.json\": 126,\n\t\"./51/origin.json\": 127,\n\t\"./52/origin.json\": 128,\n\t\"./53/origin.json\": 129,\n\t\"./54/origin.json\": 130,\n\t\"./55/origin.json\": 131,\n\t\"./56/origin.json\": 132,\n\t\"./57/origin.json\": 133,\n\t\"./58/origin.json\": 134,\n\t\"./59/origin.json\": 135,\n\t\"./6/origin.json\": 136,\n\t\"./60/origin.json\": 137,\n\t\"./61/origin.json\": 138,\n\t\"./62/origin.json\": 139,\n\t\"./63/origin.json\": 140,\n\t\"./64/origin.json\": 141,\n\t\"./65/origin.json\": 142,\n\t\"./66/origin.json\": 143,\n\t\"./67/origin.json\": 144,\n\t\"./68/origin.json\": 145,\n\t\"./69/origin.json\": 146,\n\t\"./7/origin.json\": 147,\n\t\"./70/origin.json\": 148,\n\t\"./71/origin.json\": 149,\n\t\"./72/origin.json\": 150,\n\t\"./73/origin.json\": 151,\n\t\"./74/origin.json\": 152,\n\t\"./75/origin.json\": 153,\n\t\"./76/origin.json\": 154,\n\t\"./77/origin.json\": 155,\n\t\"./78/origin.json\": 156,\n\t\"./79/origin.json\": 157,\n\t\"./8/origin.json\": 158,\n\t\"./80/origin.json\": 159,\n\t\"./81/origin.json\": 160,\n\t\"./82/origin.json\": 161,\n\t\"./83/origin.json\": 162,\n\t\"./84/origin.json\": 163,\n\t\"./85/origin.json\": 164,\n\t\"./86/origin.json\": 165,\n\t\"./87/origin.json\": 166,\n\t\"./88/origin.json\": 167,\n\t\"./89/origin.json\": 168,\n\t\"./9/origin.json\": 169,\n\t\"./90/origin.json\": 170,\n\t\"./91/origin.json\": 171,\n\t\"./92/origin.json\": 172,\n\t\"./93/origin.json\": 173,\n\t\"./94/origin.json\": 174,\n\t\"./95/origin.json\": 175,\n\t\"./96/origin.json\": 176,\n\t\"./97/origin.json\": 177,\n\t\"./98/origin.json\": 178,\n\t\"./99/origin.json\": 179\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 79;","var map = {\n\t\"./1/flat.json\": 181,\n\t\"./10/flat.json\": 182,\n\t\"./100/flat.json\": 183,\n\t\"./11/flat.json\": 184,\n\t\"./12/flat.json\": 185,\n\t\"./13/flat.json\": 186,\n\t\"./14/flat.json\": 187,\n\t\"./15/flat.json\": 188,\n\t\"./16/flat.json\": 189,\n\t\"./17/flat.json\": 190,\n\t\"./18/flat.json\": 191,\n\t\"./19/flat.json\": 192,\n\t\"./2/flat.json\": 193,\n\t\"./20/flat.json\": 194,\n\t\"./21/flat.json\": 195,\n\t\"./22/flat.json\": 196,\n\t\"./23/flat.json\": 197,\n\t\"./24/flat.json\": 198,\n\t\"./25/flat.json\": 199,\n\t\"./26/flat.json\": 200,\n\t\"./27/flat.json\": 201,\n\t\"./28/flat.json\": 202,\n\t\"./29/flat.json\": 203,\n\t\"./3/flat.json\": 204,\n\t\"./30/flat.json\": 205,\n\t\"./31/flat.json\": 206,\n\t\"./32/flat.json\": 207,\n\t\"./33/flat.json\": 208,\n\t\"./34/flat.json\": 209,\n\t\"./35/flat.json\": 210,\n\t\"./36/flat.json\": 211,\n\t\"./37/flat.json\": 212,\n\t\"./38/flat.json\": 213,\n\t\"./39/flat.json\": 214,\n\t\"./4/flat.json\": 215,\n\t\"./40/flat.json\": 216,\n\t\"./41/flat.json\": 217,\n\t\"./42/flat.json\": 218,\n\t\"./43/flat.json\": 219,\n\t\"./44/flat.json\": 220,\n\t\"./45/flat.json\": 221,\n\t\"./46/flat.json\": 222,\n\t\"./47/flat.json\": 223,\n\t\"./48/flat.json\": 224,\n\t\"./49/flat.json\": 225,\n\t\"./5/flat.json\": 226,\n\t\"./50/flat.json\": 227,\n\t\"./51/flat.json\": 228,\n\t\"./52/flat.json\": 229,\n\t\"./53/flat.json\": 230,\n\t\"./54/flat.json\": 231,\n\t\"./55/flat.json\": 232,\n\t\"./56/flat.json\": 233,\n\t\"./57/flat.json\": 234,\n\t\"./58/flat.json\": 235,\n\t\"./59/flat.json\": 236,\n\t\"./6/flat.json\": 237,\n\t\"./60/flat.json\": 238,\n\t\"./61/flat.json\": 239,\n\t\"./62/flat.json\": 240,\n\t\"./63/flat.json\": 241,\n\t\"./64/flat.json\": 242,\n\t\"./65/flat.json\": 243,\n\t\"./66/flat.json\": 244,\n\t\"./67/flat.json\": 245,\n\t\"./68/flat.json\": 246,\n\t\"./69/flat.json\": 247,\n\t\"./7/flat.json\": 248,\n\t\"./70/flat.json\": 249,\n\t\"./71/flat.json\": 250,\n\t\"./72/flat.json\": 251,\n\t\"./73/flat.json\": 252,\n\t\"./74/flat.json\": 253,\n\t\"./75/flat.json\": 254,\n\t\"./76/flat.json\": 255,\n\t\"./77/flat.json\": 256,\n\t\"./78/flat.json\": 257,\n\t\"./79/flat.json\": 258,\n\t\"./8/flat.json\": 259,\n\t\"./80/flat.json\": 260,\n\t\"./81/flat.json\": 261,\n\t\"./82/flat.json\": 262,\n\t\"./83/flat.json\": 263,\n\t\"./84/flat.json\": 264,\n\t\"./85/flat.json\": 265,\n\t\"./86/flat.json\": 266,\n\t\"./87/flat.json\": 267,\n\t\"./88/flat.json\": 268,\n\t\"./89/flat.json\": 269,\n\t\"./9/flat.json\": 270,\n\t\"./90/flat.json\": 271,\n\t\"./91/flat.json\": 272,\n\t\"./92/flat.json\": 273,\n\t\"./93/flat.json\": 274,\n\t\"./94/flat.json\": 275,\n\t\"./95/flat.json\": 276,\n\t\"./96/flat.json\": 277,\n\t\"./97/flat.json\": 278,\n\t\"./98/flat.json\": 279,\n\t\"./99/flat.json\": 280\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 180;","import * as d3 from 'd3';\n\nclass DataLoader {\n    constructor() {\n        this._data = [];\n        this._schema = [];\n    }\n\n    data() {\n        return this._data;\n    }\n\n    schema() {\n        return this._schema;\n    }\n\n    load(spec) {\n        return new Promise((resolve, reject) => {\n            let numericalFields = [];\n            let numerical = spec.schema.filter(d => d.type === \"numerical\");\n            numericalFields = numerical.map(d => d.field);\n            if ('values' in spec) {\n                let data = spec.values;\n                data.forEach((d, i) => {\n                    for (let key in d) {\n                        if (numericalFields.indexOf(key) !== -1) {\n                            d[key] = parseFloat(d[key])\n                        }\n                    }\n                })\n                this._data = data;\n                this._schema = spec.schema;\n                resolve(this);\n            } else {\n                d3.csv(spec.url)\n                .then(function (data) {\n                    data.forEach((d, i) => {\n                        for (let key in d) {\n                            if (numericalFields.indexOf(key) !== -1) {\n                                d[key] = parseFloat(d[key])\n                            }\n                        }\n                    })\n                    this._data = data;\n                    this._schema = spec.schema;\n                    resolve(this);\n                }.bind(this)).catch(function (error) {\n                    reject(error);\n                })\n            }\n        });\n    }\n}\n\nexport default DataLoader;","const FactType = {\n    Association: 'association',\n    Categorization: 'categorization',\n    Difference: 'difference',\n    Distribution: 'distribution',\n    Extreme: 'extreme',\n    Outlier: 'outlier',\n    Proportion: 'proportion',\n    Rank: 'rank',\n    Trend: 'trend',\n    Value: 'value',\n}\n\nexport default FactType","export default {\n    SUM: 'sum',\n    MAX: 'max',\n    MIN: 'min',\n    AVG: 'avg',\n    COUNT: 'count',\n    NONE: 'none'\n}","import * as d3 from 'd3';\nimport FactType from './visualization/facttype';\nimport AggregationType from './visualization/aggtype';\n\nclass Fact {\n    constructor() {\n        // data, factspec\n        this._data = [];\n        this._schema = [];\n        this._factdata = [];\n        this._type = \"\";\n        this._measure = [];\n        this._subspace = [];\n        this._breakdown = [];\n        this._parameter = \"\";\n        this._focus = [];\n    }\n\n    data(value) {\n        if (!value) {\n            return this._data;\n        }\n        this._data = value;\n        this._factdata = value;\n    }\n\n    schema(value) {\n        this._schema = value;\n    }\n\n    factdata() {\n        return this._factdata;\n    }\n\n    fact() {\n        return {\n            type: this._type,\n            measure: this._measure,\n            subspace: this._subspace,\n            breakdown: this._breakdown,\n            focus: this._focus,\n            parameter: this._parameter\n        }\n    }\n\n    process(spec) {\n        this._type = spec.type ? spec.type : FactType.Distribution;\n        this._measure = spec.measure ? spec.measure : [];\n        if (this._measure.length === 0) {\n            this._measure = [{ 'aggregate': 'count' }];\n        }\n        this._subspace = spec.subspace ? spec.subspace : [];\n        this._breakdown = spec.breakdown ? spec.breakdown : [];\n        this._focus = spec.focus ? spec.focus : [];\n\n        let schemaDict = {};\n        for (const column of this._schema) {\n            schemaDict[column.field] = {};\n            schemaDict[column.field]['subtype'] = column.subtype;\n            schemaDict[column.field]['pictype'] = column.pictype;\n            schemaDict[column.field]['type'] = column.type;\n            schemaDict[column.field]['values'] = column.values;\n            schemaDict[column.field]['isPostCode'] = column.isPostCode;\n        }\n        this._measure = this._measure.map(x => {\n            if ('field' in x) {\n                x['type'] = schemaDict[x.field]['type'];\n                if (schemaDict[x.field]['subtype']) {\n                    x['subtype'] = schemaDict[x.field]['subtype'];\n                }\n                if (schemaDict[x.field]['pictype']) {\n                    x['pictype'] = schemaDict[x.field]['pictype'];\n                }\n            }\n            return x;\n        });\n        this._subspace = this._subspace.map(x => {\n            x['type'] = schemaDict[x.field]['type'];\n            if (schemaDict[x.field]['subtype']) {\n                x['subtype'] = schemaDict[x.field]['subtype'];\n            }\n            if (schemaDict[x.field]['pictype']) {\n                x['pictype'] = schemaDict[x.field]['pictype'];\n            }\n            if (schemaDict[x.field]['isPostCode']) {\n                x['isPostCode'] = schemaDict[x.field]['isPostCode'];\n            }\n            return x;\n        });\n        this._breakdown = this._breakdown.map(x => {\n            x['type'] = schemaDict[x.field]['type'];\n            if (schemaDict[x.field]['subtype']) {\n                x['subtype'] = schemaDict[x.field]['subtype'];\n            }\n            if (schemaDict[x.field]['pictype']) {\n                x['pictype'] = schemaDict[x.field]['pictype'];\n            }\n            if (schemaDict[x.field]['values']) {\n                x['values'] = schemaDict[x.field]['values'];\n            }\n            if (schemaDict[x.field]['isPostCode']) {\n                x['isPostCode'] = schemaDict[x.field]['isPostCode'];\n            }\n            return x;\n        });\n        this._focus = this._focus.map(x => {\n            x['type'] = schemaDict[x.field]['type'];\n            if (schemaDict[x.field]['subtype']) {\n                x['subtype'] = schemaDict[x.field]['subtype'];\n            }\n            if (schemaDict[x.field]['pictype']) {\n                x['pictype'] = schemaDict[x.field]['pictype'];\n            }\n            return x;\n        });\n\n        /** subspace **/\n        if (this._subspace.length > 0) {\n            this._factdata = this.filter(this.factdata(), this._subspace);\n        }\n        /** aggregate **/\n        if (this._measure.length > 0) {\n            let measure = this._measure;\n            let breakdown = this._breakdown;\n            this._factdata = this.aggregate(this._factdata, measure, breakdown);\n        }\n\n        /** parameter **/\n        try {\n            this._parameter = this.parameter()\n        } catch (error) {\n            console.log('parameter is wrong')\n        }\n        \n        return new Promise((resolve, reject) => {\n            resolve(this);\n        });\n    }\n\n    parameter() {\n        let data = this.factdata();\n        let fact = this.fact();\n        let breakdown = fact.breakdown;\n        let focus = fact.focus;\n        let measure = fact.measure;\n\n        switch (fact.type) {\n            case FactType.Association:\n                function pearson(items, k1, k2) {\n                    var x = 0,\n                        xx = 0,\n                        y = 0,\n                        yy = 0,\n                        xy = 0;\n\n                    items.forEach(item => {\n                        xx += item[k1] * item[k1];\n                        x += item[k1];\n\n                        yy += item[k2] * item[k2];\n                        y += item[k2]\n\n                        xy += item[k1] * item[k2];\n                    });\n\n                    var Lxx = xx - ((x * x) / items.length),\n                        Lyy = yy - ((y * y) / items.length),\n                        Lxy = xy - ((x * y) / items.length);\n\n                    if (Lxx === 0 || Lyy === 0)\n                        return 0;\n\n                    return Lxy / Math.sqrt(Lxx * Lyy);\n                }\n                const x = \"measure0:\" + (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field),\n                    y = \"measure1:\" + (measure[1].aggregate === \"count\" ? \"COUNT\" : measure[1].field);\n                let pearsons = pearson(data, x, y)\n                return pearsons;\n\n            case FactType.Categorization:\n                let categories = data.map((d) => {\n                    return d[breakdown[0].field]\n                })\n                return Array.from(new Set(categories));\n\n            case FactType.Rank:\n                let rankList = data.sort((a, b) => b['Recovered'] - a['Recovered'])\n                let rankCaetgories = rankList.map((d) => {\n                    return d[breakdown[0].field]\n                })\n                return rankCaetgories;\n\n            case FactType.Proportion:\n                let focusItem = data.find(d => d[focus[0].field] === focus[0].value),\n                    restItems = data.filter(d => d[focus[0].field] !== focus[0].value);\n                let yEncoding = measure[0].field;\n                let seriesData = [focusItem[yEncoding], d3.sum(restItems, d => d[yEncoding])];\n                let pieData = d3.pie().sort(null)(seriesData);\n                let percent = pieData[0].value / d3.sum(pieData, d => d.value);\n                let percentText = (percent * 100).toFixed(1) + \"%\";\n                return percentText;\n\n            case FactType.Value:\n                return data[0][measure[0].field];\n\n            case FactType.Trend:\n                const getLeastSquares = (X, Y) => {\n                    let ret = {}\n\n                    let sumX = 0\n                    let sumY = 0\n                    let sumXY = 0\n                    let sumXSq = 0\n                    let N = X.length\n\n                    for (let i = 0; i < N; ++i) {\n                        sumX += X[i]\n                        sumY += Y[i]\n                        sumXY += X[i] * Y[i]\n                        sumXSq += X[i] * X[i]\n                    }\n\n                    ret.m = ((sumXY - sumX * sumY / N)) / (sumXSq - sumX * sumX / N)\n                    ret.b = sumY / N - ret.m * sumX / N\n\n                    return ret;\n                }\n\n                let arr = Array.apply(null, { length: data.length }).map((item, index) => {\n                    return index\n                })\n\n                let ret = getLeastSquares(arr, data.map(d => d[measure[0].field]))\n\n                if (ret.m > 0) return 'increasing'\n                if (ret.m < 0) return 'decreasing'\n                return 'flat'\n\n            case FactType.Difference:\n                let filteredData = []\n                for (const fs of focus) {\n                    data.filter((x) => x[fs.field] === fs.value)[0] && filteredData.push(data.filter((x) => x[fs.field] === fs.value)[0])\n                }\n                let differenceValue = Math.abs(Number(filteredData[0][measure[0].field]) - Number(filteredData[1] ? filteredData[1][measure[0].field] : 0));\n                return differenceValue;\n\n            case FactType.Extreme:\n                let extremeItem = data.find(d => d[focus[0].field] === focus[0].value)\n                let maxValue = d3.max(data, d => d[measure[0].field])\n                let minValue = d3.min(data, d => d[measure[0].field])\n                extremeItem.extremeFocus = ''\n                if(extremeItem[measure[0].field] === minValue) extremeItem.extremeFocus = \"minimum\" \n                if(extremeItem[measure[0].field] === maxValue) extremeItem.extremeFocus = \"maximum\" \n                return Object.values(extremeItem);\n\n            default:\n                return \"\";\n        }\n    }\n\n    filter(data, subspace) {\n        let filteredData = data;\n        //只有subspace有数据才会进入到该函数\n        //先提取出subspace中的第一个内容，观察是否有\"operator\"选项\n        //如果有\"operator\":那么按照新的过滤方式处理\n        //如果没有\"operator\":那么遵循原来的过滤方式\n        let wayFlag=subspace[0].hasOwnProperty(\"operator\");\n        if(wayFlag){\n            //多个subspace\n            //一个subspace对应多个value\n            //要根据operator选项判断清楚进行何种操作\n            subspace.forEach((item)=>{\n                let operator=item[\"operator\"];\n                switch (operator) {\n                    case \"EQ\":\n                        //表示==某个值，这里的值仅为某个数值类型的值\n                        filteredData= filteredData.filter((x) => {\n                            //比较浮点数的大小\n                            return Math.abs(x[item.field]-parseFloat(item.value[0]))<1e-2;\n                        });\n                        break;\n                    case \"IN\":\n                        //表示==某个值\n                        filteredData= filteredData.filter((x) => {\n                            return item.value.includes(x[item.field]);\n                        });\n                        break;\n                    case \"RANGE\":\n                        //表示在某个值的范围内，value中会有两个值\n                        //需要将两个值都取出来,转化为数值形式\n                        let value1=parseFloat(item.value[0]);\n                        let value2=parseFloat(item.value[1]);\n                        let max=value1;\n                        let min=value2;\n                        // 比较大小，确定边界范围\n                        if(value1<value2) {\n                            max=value2;\n                            min=value1;\n                        }\n                        filteredData= filteredData.filter((x) => {\n                            return x[item.field]>=min &&x[item.field]<=max;\n                        });\n                        break;\n                    case \"NOT RANGE\":\n                        //表示在某个值的范围内，value中会有两个值\n                        //需要将两个值都取出来,转化为数值形式\n                        let valueNoRange1=parseFloat(item.value[0]);\n                        let valueNoRange2=parseFloat(item.value[1]);\n                        let max1=valueNoRange1;\n                        let min1=valueNoRange2;\n                        // 比较大小，确定边界范围\n                        if(valueNoRange1<valueNoRange2) {\n                            max1=valueNoRange2;\n                            min1=valueNoRange1;\n                        }\n                        filteredData= filteredData.filter((x) => {\n                            return x[item.field]<min1 || x[item.field]>max1;\n                        });\n                        break;\n                    case \"GT\":\n                        //表示大于某个值，所以这里的值仅有一个\n                        //需要将其进行转化为数值形式\n                        filteredData= filteredData.filter((x) => {\n                            return x[item.field]>parseFloat(item.value[0]);\n                        });\n                        break;\n                    case \"LT\":\n                        //表示小于某个值，所以这里的值仅有一个\n                        //需要将其进行转化为数值形式\n                        filteredData= filteredData.filter((x) => {\n                            return x[item.field]<parseFloat(item.value[0]);\n                        });\n                        break;\n                    default:\n                        console.log(\"operator error!not in [GT,IN,LT,NOT RANGE,RANGE,EQ]\");\n\n                }\n            });\n            return  filteredData;\n\n        }else{\n\n            /** filter rows **/\n            for (const sub of subspace) {\n                filteredData = filteredData.filter((x) => {\n                    // console.log(x);\n                    return x[sub.field] === sub.value})\n            }\n            return filteredData\n        }\n    }\n\n    aggregate(data, measures, breakdowns) {\n        let aggdata = [];\n        if (measures.length < 1) {\n            aggdata = data;\n        } else if (measures.length === 1) {\n            let measure = measures[0];\n            aggdata = this.agg(data, measure, breakdowns);\n\n        } else if (measures.length === 2) {\n            // over one measure\n            let aggdata1 = [];\n            let aggdata2 = [];\n            if (breakdowns.length > 0) {\n                aggdata1 = this.agg(data, measures[0], breakdowns);\n                aggdata2 = this.agg(data, measures[1], breakdowns);\n            } else {\n                aggdata1 = JSON.parse(JSON.stringify(data));\n                aggdata2 = JSON.parse(JSON.stringify(data));\n            }\n            let breakdownfields = breakdowns.map(x => x.field)\n            for (let index = 0; index < aggdata1.length; index++) {\n                const element1 = aggdata1[index];\n                for (const key in element1) {\n                    if (!breakdownfields.includes(key)) {\n                        element1[\"measure0:\" + key] = element1[key];\n                        delete element1[key];\n                    }\n                }\n                const element2 = aggdata2[index];\n                for (const key in element2) {\n                    if (!breakdownfields.includes(key)) {\n                        element2[\"measure1:\" + key] = element2[key];\n                        delete element2[key];\n                    }\n                }\n                aggdata.push(Object.assign(element1, element2));\n            }\n        } else if (measures.length === 3) {\n            // 3 measures\n            let aggdata1 = [];\n            let aggdata2 = [];\n            let aggdata3 = [];\n            if (breakdowns.length > 0) {\n                aggdata1 = this.agg(data, measures[0], breakdowns);\n                aggdata2 = this.agg(data, measures[1], breakdowns);\n                aggdata3 = this.agg(data, measures[2], breakdowns);\n            } else {\n                aggdata1 = JSON.parse(JSON.stringify(data));\n                aggdata2 = JSON.parse(JSON.stringify(data));\n                aggdata3 = JSON.parse(JSON.stringify(data));\n            }\n            let breakdownfields = breakdowns.map(x => x.field)\n            for (let index = 0; index < aggdata1.length; index++) {\n                const element1 = aggdata1[index];\n                for (const key in element1) {\n                    if (!breakdownfields.includes(key)) {\n                        element1[\"measure0:\" + key] = element1[key];\n                        delete element1[key];\n                    }\n                }\n                const element2 = aggdata2[index];\n                for (const key in element2) {\n                    if (!breakdownfields.includes(key)) {\n                        element2[\"measure1:\" + key] = element2[key];\n                        delete element2[key];\n                    }\n                }\n                const element3 = aggdata3[index];\n                for (const key in element3) {\n                    if (!breakdownfields.includes(key)) {\n                        element3[\"measure2:\" + key] = element3[key];\n                        delete element3[key];\n                    }\n                }\n                aggdata.push(Object.assign(element1, element2, element3));\n            }\n        }\n        return aggdata;\n    }\n\n    agg(data, measure, breakdowns) {\n        let aggdata = {};\n        /**\n         * filter columns\n         */\n        let columns = [];\n        columns = columns.concat(breakdowns.map(x => x.field));\n        if (measure.aggregate !== \"count\") {\n            columns.push(measure.field);\n        }\n        aggdata = data.map(x => {\n            let y = {};\n            for (const column of columns) {\n                y[column] = x[column];\n            }\n            return y;\n        });\n        switch (measure.aggregate) {\n            case AggregationType.SUM:\n                aggdata = this.sum(aggdata, measure, breakdowns);\n                break;\n            case AggregationType.AVG:\n                aggdata = this.avg(aggdata, measure, breakdowns);\n                break;\n            case AggregationType.MAX:\n                aggdata = this.max(aggdata, measure, breakdowns);\n                break;\n            case AggregationType.MIN:\n                aggdata = this.min(aggdata, measure, breakdowns);\n                break;\n            case AggregationType.COUNT:\n                aggdata = this.count(aggdata, measure, breakdowns)\n                break;\n\n            default:\n                aggdata = this.max(aggdata, measure, breakdowns);\n                break;\n        }\n        return aggdata;\n    }\n\n    sum(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let sumData = new Array(calculateData.length).fill(0);\n                let categoryData = calculateData.map(function (d, i) {\n                    d.values.forEach(d => {\n                        sumData[i] += d[measure.field]\n                    })\n                    let sumRows = Object.assign({}, d.values[0])\n                    sumRows[measure.field] = sumData[i]\n                    return sumRows\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            let sumData = new Array(calculateData.length).fill(0);\n            factdata = calculateData.map(function (d, i) {\n                d.values.forEach(d => {\n                    sumData[i] += d[measure.field]\n                })\n                let sumRows = Object.assign({}, d.values[0])\n                sumRows[measure.field] = sumData[i]\n                return sumRows\n            });\n        } else {\n            /** no breakdown **/\n            let agg = {};\n            agg[measure.field] = 0;\n            for (let index = 0; index < data.length; index++) {\n                agg[measure.field] += data[index][measure.field];\n            }\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n\n    avg(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let sumData = new Array(calculateData.length).fill(0);\n                let categoryData = calculateData.map(function (d, i) {\n                    d.values.forEach(d => {\n                        sumData[i] += d[measure.field]\n                    })\n                    let sumRows = Object.assign({}, d.values[0])\n                    sumRows[measure.field] = sumData[i] / d.values.length;\n                    return sumRows;\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            let sumData = new Array(calculateData.length).fill(0);\n            factdata = calculateData.map(function (d, i) {\n                d.values.forEach(d => {\n                    sumData[i] += d[measure.field]\n                })\n                let sumRows = Object.assign({}, d.values[0])\n                sumRows[measure.field] = sumData[i] / d.values.length;\n                return sumRows;\n            });\n        } else {\n            /** no breakdown **/\n            let agg = {};\n            agg[measure.field] = 0;\n            for (let index = 0; index < data.length; index++) {\n                agg[measure.field] += data[index][measure.field];\n            }\n            agg[measure.field] /= data.length;\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n\n    max(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let categoryData = calculateData.map(function (d, i) {\n                    let index = d3.scan(d.values, function (a, b) {\n                        if (a[measure.field] && b[measure.field])\n                            return b[measure.field] - a[measure.field];\n                    });\n                    if (index >= 0) {\n                        return d.values[index]\n                    } else {\n                        return d.values[0];\n                    }\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            factdata = calculateData.map(function (d, i) {\n                let index = d3.scan(d.values, function (a, b) {\n                    if (a[measure.field] && b[measure.field])\n                        return b[measure.field] - a[measure.field];\n                });\n                if (index >= 0) {\n                    return d.values[index]\n                } else {\n                    return d.values[0];\n                }\n            });\n        } else {\n            /** no breakdown **/\n            let agg = {};\n            agg[measure.field] = data[0][measure.field];\n            for (let index = 0; index < data.length; index++) {\n                if (agg[measure.field] < data[index][measure.field]) {\n                    agg[measure.field] = data[index][measure.field];\n                }\n            }\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n\n    min(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let categoryData = calculateData.map(function (d) {\n                    let index = d3.scan(d.values, function (a, b) {\n                        if (a[measure.field] && b[measure.field])\n                            return a[measure.field] - b[measure.field];\n                    });\n                    if (index >= 0) {\n                        return d.values[index]\n                    } else {\n                        return d.values[0]\n                    }\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            factdata = calculateData.map(function (d) {\n                let index = d3.scan(d.values, function (a, b) {\n                    if (a[measure.field] && b[measure.field])\n                        return a[measure.field] - b[measure.field];\n                });\n                if (index >= 0) {\n                    return d.values[index]\n                } else {\n                    return d.values[0]\n                }\n            });\n        } else {\n            /** no breakdown **/\n            let agg = {};\n            agg[measure.field] = data[0][measure.field];\n            for (let index = 0; index < data.length; index++) {\n                if (agg[measure.field] > data[index][measure.field]) {\n                    agg[measure.field] = data[index][measure.field];\n                }\n            }\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n\n    count(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let countData = new Array(calculateData.length).fill(0);\n                let categoryData = calculateData.map(function (d, i) {\n                    d.values.forEach(() => {\n                        countData[i] += 1;\n                    })\n                    let countRows = d.values[0];\n                    countRows['COUNT'] = countData[i];\n                    return countRows;\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            let countData = new Array(calculateData.length).fill(0);\n            factdata = calculateData.map(function (d, i) {\n                d.values.forEach(() => {\n                    countData[i] += 1\n                })\n                let countRows = d.values[0];\n                countRows['COUNT'] = countData[i];\n                return countRows;\n            });\n        } else {\n            /** no breakdown **/\n            let agg = { 'COUNT': data.length };\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n}\n\nexport default Fact;\n","const MarkType = {\n    BAR: 'bar',\n    LINE: 'line',\n    POINT: 'point',\n    UNIT: 'unit'\n}\n\nexport default MarkType","const Size = {\n    LARGE: 'large',\n    WIDE: 'wide',\n    MIDDLE: 'middle',\n    SMALL: 'small',\n}\n\nexport default Size","import MarkType from './visualization/marktype';\nimport Size from './visualization/size';\n\nclass Visualization {\n    constructor() {\n        this._container = \"\";\n        this._data = [];\n        this._fact = {};\n        this._factdata = [];\n        this._processedData = [];\n        this._size = Size.LARGE;\n        this._width = 0;\n        this._height = 0;\n        this._mark = MarkType.POINT;\n        this._chart = {};\n        this._caption = \"\";\n        this._pipeline = null;\n    }\n\n    container(value) {\n        this._container = value;\n    }\n\n    size(value) {\n        if (!value) {\n            return this._size;\n        }\n        this._size = value;\n    }\n\n    width(value) {\n        if (!value) {\n            return this._width;\n        }\n        this._width = value;\n    }\n\n    height(value) {\n        if (!value) {\n            return this._height;\n        }\n        this._height = value;\n    }\n\n    data(value) {\n        if (!value) {\n            return this._data;\n        }\n        this._data = value;\n        this._processedData = value;\n    }\n\n    factdata(value) {\n        if (!value) {\n            return this._factdata;\n        }\n        this._factdata = value;\n    }\n\n    processedData(value) {\n        if (!value) {\n            return this._processedData;\n        }\n        this._processedData = value;\n    }\n\n    fact(value) {\n        if (!value) {\n            return this._fact;\n        }\n        this._fact = value;\n    }\n\n    chart(value) {\n        if (!value) {\n            return this._chart;\n        }\n        this._chart = value;\n    }\n\n    caption(value) {\n        if (!value) {\n            return this._caption;\n        }\n        this._caption = value;\n    }\n\n    pipeline(value) {\n        if (!value) {\n            return this._pipeline;\n        }\n        this._pipeline = value;\n    }\n\n    run() {\n        this.pipeline().operate(this);\n    }\n\n    stop() {\n        if (this.pipeline()) {\n            this.pipeline().stop();\n        }\n    }\n}\n\nexport default Visualization;","class Action {\n    constructor(spec) {\n        this._target = null\n    }\n\n    target(value) {\n        if (!value) {\n            return this._target;\n        }\n        this._target = value;\n    }\n\n    operate(vis) {\n        \n    }\n}\n\nexport default Action;","import { max, min, sum } from 'd3';\nimport Action from './action';\n\nclass DataProcess extends Action {\n    constructor(spec) {\n        super(spec);\n        this._select = [];\n        this._groupby = [];\n        this._filter = [];\n        if ('select' in spec) {\n            this._select = spec['select'];\n        }\n        if ('groupby' in spec) {\n            this._groupby = spec['groupby'];\n        }\n        if ('filter' in spec) {\n            this._filter = spec['filter'];\n        }\n    }\n\n    operate(vis) {\n        // 根据 spec 处理 data\n        let data = vis.data();\n\n        // Step 1: Filter \n        try {\n            if (this._filter.length !== 0) {\n                data = data.filter(row => {\n                    for (const f of this._filter) {\n                        if (!(f.field in row && row[f.field] === f.value)) {\n                                return false;\n                            }\n                    }\n                    return true;\n                })\n            }\n        } catch (error) {\n            console.error('Data Processing: Error In Filtering:\\n' + Error);\n        }\n        \n        // Step 2: Groupby\n        // aggregate(被select的数值列) by groupby\n        // 如果有 agg 和 groupby ==> 根据 groupby 整理所有数值然后做 min/max/...\n        // 如果没有 agg 和 groupby ==> filter 后直接返回\n        // 如果有 agg 没有 groupby ==> 整张表做 agg\n        // 如果没有 agg 有 groupby ==> 返回对应的首个值\n        let processedData = data;\n        try {\n            processedData = this.aggregate(data, this._select, this._groupby);\n        } catch (error) {\n            console.error('Data Processing: Error In Group By:\\n' + Error);\n        }\n\n        // Step 3: Select\n        // select: only store cols being selected\n        try {\n            const selectCols = this._select.map(s => s.field);\n\n            processedData.forEach(row => {\n                for (const key in row) {\n                    if (!selectCols.includes(key)) {\n                        delete row[key];\n                    }\n                }\n            });\n        } catch (error) {\n            console.error('Data Processing: Error In Select:\\n' + Error);\n        }\n        \n        // 处理完的 processedData 存进 vis 里\n        vis.processedData(processedData);\n    }\n\n    /**\n     * aggregating data specified in 'select'\n     * @param {*} data \n     * @param {*} selects selected cols\n     * @param {*} groupbys aggregate with groupby\n     * @returns \n     */\n    aggregate(data, selects, groupbys) {\n        if (selects.length === 0 && groupbys.length === 0) {\n            return data;\n        }\n        const groupbyCols = groupbys.map(g => g.field); \n        const aggCols = selects.filter(s => 'aggregate' in s && s.aggregate !== 'None') // filter for cols needed to be aggregated\n                                .reduce(function(res, col) {\n                                    res[col.field] = col.aggregate;\n                                    return res;\n                                }, {});\n        // restore records by groupby values\n        const result = data.reduce(function (res, obj) {\n            // 为了在 res 中存储每组unique 的 groupby 记录\n            let recordName = groupbyCols.reduce(function(res, col) {\n                return res + col + ':' + obj[col] + ';';\n            }, \"\");\n\n            if (!(recordName in res)) {\n                let tempObj = { ...obj };\n                // 把需要 agg 的 col 变成数组，方便后续统一处理 agg function\n                Object.keys(aggCols).forEach(s => {\n                    tempObj[s] = [tempObj[s]];\n                });\n                res.push(res[recordName] = tempObj);\n            } else {\n                Object.keys(aggCols).forEach(col => {\n                    res[recordName][col].push(obj[col]);\n                })\n            }\n            return res;\n            \n        }, []);\n\n        // aggregate data with min/max/sum/count\n        result.forEach(record => {\n            Object.keys(aggCols).forEach(col => {\n                if (col in record) {\n                    record[col] = this.aggFuncRouter(record[col], aggCols[col]);\n                }\n            })\n        })\n        \n        return [...result];\n    }\n\n    /**\n     * aggregate a column with different agg function\n     * @param {*} colData column data to be aggregated\n     * @param {*} aggFunc aggregate function eg min/max/sum/avg/mean/count/...\n     * @returns \n     */\n    aggFuncRouter(colData, aggFunc) {\n        switch(aggFunc.toLowerCase()) {\n            case 'min':\n                return min(colData);\n            case 'max':\n                return max(colData);\n            case 'sum':\n                return sum(colData);\n            case 'count':\n                return colData.length;\n            case 'avg':\n            case 'mean':\n            default:\n                return sum(colData) / colData.length;\n        }\n\n    }\n\n}\n\nexport default DataProcess;","import * as d3 from 'd3';\n\nclass Chart {\n    constructor() {\n        this._container = document.createElement(\"div\");\n        this._svg = d3.select(this._container).append(\"svg\")\n        this._xScale = {};\n        this._yScale = {};\n        this._rxScale = {};\n        this._ryScale = {};\n        this._width = 0;\n        this._height = 0;\n        this._data = [];\n        this._processedData = [];\n\n        // this._factdata = [];\n        // this._subspace = [];\n        // this._measure = [];\n        // this._breakdown = [];\n        // this._focus = [];\n    }\n\n    container(value) {\n        if (!value) {\n            return this._container;\n        }\n        this._container = value;\n    }\n\n    clear() {\n        d3.select(this._container).selectAll(\"*\").remove();\n    }\n\n    svg() {\n        return this._svg;\n    }\n\n    xScale(value) {\n        if (!value) {\n            return this._xScale;\n        }\n        this._xScale = value;\n    }\n\n    yScale(value) {\n        if (!value) {\n            return this._yScale;\n        }\n        this._yScale = value;\n    }\n\n    width(value) {\n        if (!value) {\n            return 320;\n        }\n        this._width = value;\n    }\n\n    height(value) {\n        if (!value) {\n            return 320;\n        }\n        this._height = value;\n    }\n\n    data(value) {\n        if (!value) {\n            return this._data;\n        }\n        this._data = value;\n    }\n\n    factdata(value) {\n        if (!value) {\n            return this._factdata;\n        }\n        this._factdata = value;\n    }\n\n    processedData(value) {\n        if (!value && !this._processedData) {\n            return this._data;\n        }\n        if (!value) {\n            return this._processedData;\n        }\n        this._processedData = value;\n    }\n\n    subspace(value) {\n        if (!value) {\n            return this._subspace;\n        }\n        this._subspace = value;\n    }\n\n    measure(value) {\n        if (!value) {\n            return this._measure;\n        }\n        this._measure = value;\n    }\n\n    breakdown(value) {\n        if (!value) {\n            return this._breakdown;\n        }\n        this._breakdown = value;\n    }\n\n    focus(value) {\n        if (!value) {\n            return this._focus;\n        }\n        this._focus = value\n    }\n\n    visualize() { }\n\n    drawAxis() { }\n\n    encodeXY() { }\n\n    encodeColor() { }\n\n    encodeSize() { }\n\n    encodeShape() { }\n\n    addEncoding(channel, field) { }\n\n    modifyEncoding(channel, field) { }\n\n    removeEncoding(channel, field) { }\n\n}\n\nexport default Chart;","export default function Color(mode = \"light\") {\n    const lightMode = {\n        BACKGROUND: '#FFFFFF',\n        DIVIDER: '#D9D9D9',\n        AXIS: '#000000',\n        TITLE: '#000000',\n        TEXT: '#000000',\n        ANNOTATION: '#E02020',\n        DEFAULT: '#0612FF',\n\n        //Qualitative（categorical)\n        CATEGORICAL: ['#1f78b4', '#b2df8a', '#a6cee3', '#B2DBC1', '#EAE2B7', '#F3705C', '#4ECBC4', '#96A7CE'],\n        //Sequential\n        SEQUENTIAL: ['#7A0715', '#A71017', '#D32322', '#F04535', '#FA6B4D', '#FDAD92', '#FDCBBB', '#FFE5D9'],\n        //Diverging\n        DIVERGING: ['#1892FA', '#7CC0FB', '#ADD7F9', '#DEECF8', '#F3DEDE', '#F0ADAD', '#EC7C7C', '#E0191A']\n    }\n    const darkMode = {\n        BACKGROUND: '#000000',\n        DIVIDER: '#323232',\n        AXIS: '#FFFFFF',\n        TITLE: '#FFFFFF',\n        TEXT: '#FFFFFF',\n        ANNOTATION: '#FFBE32',\n        DEFAULT: '#73C8F3',\n\n        //Qualitative（categorical)\n        CATEGORICAL: ['#73C8F3', '#FFE86D', '#F6B0A7', '#B2DBC1', '#EAE2B7', '#F3705C', '#4ECBC4', '#96A7CE'],\n        //Sequential\n        SEQUENTIAL: ['#E0191A', '#FC4B4B', '#F46464', '#FC8585', '#FFA6A6', '#FFC8C8', '#FFDADA', '#F3DEDE'],\n        //Diverging\n        DIVERGING: ['#1892FA', '#7CC0FB', '#ADD7F9', '#DEECF8', '#F3DEDE', '#FFA6A6', '#F46464', '#E0191A']\n    }\n\n    switch (mode) {\n        case \"light\":\n            return lightMode;\n\n        case \"dark\":\n            return darkMode;\n\n        default:\n            return lightMode;\n    }\n\n}","import * as d3 from 'd3';\nimport Chart from '../chart';\nimport Color from '../../visualization/color';\n\nclass BarChart extends Chart {\n\n    visualize() {\n        let margin = {\n                \"top\": 10,\n                \"right\": 10,\n                \"bottom\": 50,\n                \"left\": 50\n            }\n        this.width(this.width() - margin.left - margin.right);\n        this.height(this.height() - margin.top - margin.bottom);\n\n        this._svg = d3.select(this.container())\n                .append(\"svg\")\n                .attr(\"width\", this.width() + margin.left + margin.right)\n                .attr(\"height\", this.height() + margin.top + margin.bottom)\n                .append(\"g\")\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n        \n        this.drawAxis();\n        this.encodeXY();\n        this.encodeColor();\n\n        return this.svg();       \n    }\n\n    drawAxis() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        let fontsize = 16, strokeWidth = 2;\n        const padding = fontsize * 0.6,\n            triangleSize = Math.ceil(Math.sqrt(height * width) / 10);\n        \n        let axis = svg.select('.axis');\n        svg.select(\".axis_x\").remove();\n        svg.select(\".axis_y\").remove();\n\n        axis.append(\"text\")\n            .attr(\"x\", width / 2)\n            .attr(\"y\", height + padding - 1)\n            .attr(\"font-size\", fontsize)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dominant-baseline\", \"hanging\")\n            .text(breakdown[0].field || \"Count\");\n        axis.append(\"path\")\n            .attr(\"class\", \"triangle\")\n            .attr(\"transform\", `translate(${width - triangleSize / 25 * 2}, ${height})rotate(90)`)\n            .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n            .attr(\"fill\", Color.AXIS);\n        axis.append(\"line\")\n            .attr(\"x1\", -strokeWidth / 2)\n            .attr(\"x2\", width)\n            .attr(\"y1\", height)\n            .attr(\"y2\", height)\n            .attr(\"stroke-width\", strokeWidth)\n            .attr(\"stroke\", Color.AXIS);\n        axis.append(\"text\")\n            .attr(\"transform\", `translate(${-padding}, ${height / 2}) rotate(-90)`)\n            .attr(\"font-size\", fontsize)\n            .attr(\"text-anchor\", \"middle\")\n            .text(measure[0].field || \"Count\");\n        axis.append(\"path\")\n            .attr(\"class\", \"triangle\")\n            .attr(\"transform\", `translate(0, ${triangleSize / 25 * 2})`)\n            .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n            .attr(\"fill\", Color.AXIS);\n        axis.append(\"line\")\n            .attr(\"y1\", 0)\n            .attr(\"y2\", height)\n            .attr(\"stroke-width\", strokeWidth)\n            .attr(\"stroke\", Color.AXIS);\n    }\n\n    encodeXY() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        const factData = this.factdata();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        const xEncoding = breakdown[0].field,\n            yEncoding = (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field);\n        \n        /** process data */\n        // get categories\n        let categoriesData = {};\n        factData.forEach((d, i) => {\n            if(categoriesData[d[xEncoding]]) {\n                categoriesData[d[xEncoding]].push(d);\n            } else {\n                categoriesData[d[xEncoding]] = [d];\n            }\n        });\n        // sum value group by category\n        let processedData = [];\n        for(let category in categoriesData) {\n            processedData.push({\n                [xEncoding]: category,\n                [yEncoding]: d3.sum(categoriesData[category], d => d[yEncoding])\n            })\n        }\n    \n        /** set the ranges */\n        let xScale = d3.scaleBand()\n            .range([0, width])\n            .domain(factData.map(d => d[xEncoding]))\n            .padding(0.5);\n    \n        let yScale = d3.scaleLinear()\n            .range([height, 0])\n            .domain([0, d3.max(processedData, d => d[yEncoding])])\n            .nice();\n    \n        /** draw axis */\n        let axis = svg.append(\"g\")\n            .attr(\"class\", \"axis\"),\n            content = svg.append(\"g\")\n                .attr(\"class\", \"content\")\n                .attr(\"chartWidth\", width)\n                .attr(\"chartHeight\", height);\n\n        let axisX = d3.axisBottom(xScale);\n        let axisY = d3.axisLeft(yScale)\n            .ticks(5)\n            .tickSize(-(height), 0, 0)\n            .tickPadding(5)\n            .tickFormat(function (d) {\n                if ((d / 1000000) >= 1) {\n                    d = d / 1000000 + \"M\";\n                } else if ((d / 1000) >= 1) {\n                    d = d / 1000 + \"K\";\n                }\n                return d;\n            });\n    \n        axis.append(\"g\")\n            .attr(\"class\", \"axis_x\")\n            .attr('transform', `translate(0, ${height})`)\n            .call(axisX);\n    \n        axis.append(\"g\")\n            .attr(\"class\", \"axis_y\")\n            .call(axisY);\n        \n        // draw y axis path\n        axis.selectAll(\".axis_y .domain\")\n            .attr(\"opacity\", 0);\n        axis.selectAll(\".axis_y\")\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", height)\n            .attr(\"stroke\", Color().AXIS);\n        \n        // axix-label\n        const labelPadding = 25, fontsize = 12;\n\n        axis.append(\"text\")\n            .attr(\"x\", width / 2)\n            .attr(\"y\", height + svg.selectAll(\".axis_x\").select(\"path\").node().getBBox().height + labelPadding)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dominant-baseline\", \"hanging\")\n            .attr(\"font-size\", fontsize)\n            .text(`${breakdown[0].field}`);\n\n        axis.append(\"text\")\n            .attr(\"transform\", `translate(${-labelPadding}, ${height / 2}) rotate(-90)`)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"font-size\", fontsize)\n            .text(`${measure[0].field} (${measure[0].aggregate})` || \"Count\");\n        \n        /** draw grid */\n        axis.selectAll(\".axis_y .tick line\")\n            .attr(\"class\", \"gridline\")\n            .attr(\"stroke\", d => {\n                if(d ===0) return 0;\n                else return Color().DIVIDER;\n            });\n        \n        /* draw rects */\n        content.append(\"g\")\n            .attr(\"class\", \"rects\")\n            .selectAll(\"rect\")\n            .data(processedData)\n            .enter().append(\"rect\")\n            .attr(\"class\", \"mark\")\n            .attr(\"x\", d => xScale(d[xEncoding]))\n            .attr(\"y\", d => yScale(d[yEncoding]))\n            .attr(\"width\", xScale.bandwidth())\n            .attr(\"height\", d => height - yScale(d[yEncoding]))\n            .attr(\"fill\", Color().DEFAULT);\n\n    }\n\n    encodeColor() {\n        // if colorEncoding, clear and redraw \n        const breakdown = this.breakdown();\n        const colorEncoding = breakdown.length < 2  ? null : breakdown[1].field;\n        if(colorEncoding) {\n            let width = this.width(),\n                height = this.height();\n            const factData = this.factdata();\n            const measure = this.measure();\n            const xEncoding = breakdown[0].field,\n                yEncoding = (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field);\n                // colorEncoding = breakdown.length < 2  ? null : breakdown[1].field;\n            let content = d3.select(\".content\");\n\n            /** clear rects */\n            d3.selectAll(\".rects\").remove();\n\n            /** process data */\n            let stackData = [];\n            // get categories\n            let categoriesData = {};\n            factData.forEach((d, i) => {\n                if(categoriesData[d[xEncoding]]) {\n                    categoriesData[d[xEncoding]].push(d);\n                } else {\n                    categoriesData[d[xEncoding]] = [d];\n                }\n            });\n            // get series\n            let seriesData = {};\n            factData.forEach(d => {\n                if(seriesData[d[colorEncoding]]) {\n                    seriesData[d[colorEncoding]].push(d);\n                } else {\n                    seriesData[d[colorEncoding]] = [d];\n                }\n            });\n            let series = Object.keys(seriesData);\n            // get stack data\n            let processedData = [];\n            for(let category in categoriesData) {\n                let row = {};\n                row[xEncoding] = category;\n                series.map(s => row[s] = 0); \n                categoriesData[category].map(d => row[d[colorEncoding]] = d[yEncoding]);\n                processedData.push(row);\n            }\n            stackData = d3.stack().keys(series)(processedData);\n\n            /** set the ranges */\n            let xScale = d3.scaleBand()\n            .range([0, width])\n            .domain(factData.map(d => d[xEncoding]))\n            .padding(0.5);\n\n            let yScale = d3.scaleLinear()\n                .range([height, 0])\n                .domain([0, d3.max(stackData[stackData.length - 1], d => d[1])])\n                .nice();\n\n            /** draw rect layers */\n            let rectLayers = content.append(\"g\")\n                .selectAll(\"g\")\n                .data(stackData)\n                .join(\"g\")\n                .attr(\"class\", \"rectLayer\")\n                .attr(\"fill\", (d, i) => Color().CATEGORICAL[i]);\n            rectLayers.selectAll(\"rect\")\n                .data(d => d)\n                .enter().append(\"rect\")\n                .attr(\"class\", \"mark\")\n                .attr(\"x\", d => xScale(d.data[xEncoding]))\n                .attr(\"y\", d => yScale(d[1]))\n                .attr(\"width\", xScale.bandwidth())\n                .attr(\"height\", d => Math.abs(yScale(d[1]) - yScale(d[0])));\n        }\n    }\n\n}\nexport default BarChart;\n\n","import * as d3 from 'd3';\nimport Chart from '../chart';\nimport Color from '../../visualization/color';\n\nclass LineChart extends Chart {\n\n    visualize() {\n        let margin = {\n                \"top\": 10,\n                \"right\": 10,\n                \"bottom\": 50,\n                \"left\": 50\n            }\n        this.width(this.width() - margin.left - margin.right);\n        this.height(this.height() - margin.top - margin.bottom);\n\n        this._svg = d3.select(this.container())\n                .append(\"svg\")\n                .attr(\"width\", this.width() + margin.left + margin.right)\n                .attr(\"height\", this.height() + margin.top + margin.bottom)\n                .append(\"g\")\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n        \n        this.drawAxis();\n        this.encodeXY();\n        this.encodeColor();\n\n        return this.svg();       \n    }\n\n    drawAxis() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        let fontsize = 16, strokeWidth = 2;\n        const padding = fontsize * 0.6,\n            triangleSize = Math.ceil(Math.sqrt(height * width) / 10);\n        \n        let axis = svg.select('.axis');\n        svg.select(\".axis_x\").remove();\n        svg.select(\".axis_y\").remove();\n\n        axis.append(\"text\")\n            .attr(\"x\", width / 2)\n            .attr(\"y\", height + padding - 1)\n            .attr(\"font-size\", fontsize)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dominant-baseline\", \"hanging\")\n            .text(breakdown[0].field || \"Count\");\n        axis.append(\"path\")\n            .attr(\"class\", \"triangle\")\n            .attr(\"transform\", `translate(${width - triangleSize / 25 * 2}, ${height})rotate(90)`)\n            .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n            .attr(\"fill\", Color.AXIS);\n        axis.append(\"line\")\n            .attr(\"x1\", -strokeWidth / 2)\n            .attr(\"x2\", width)\n            .attr(\"y1\", height)\n            .attr(\"y2\", height)\n            .attr(\"stroke-width\", strokeWidth)\n            .attr(\"stroke\", Color.AXIS);\n        axis.append(\"text\")\n            .attr(\"transform\", `translate(${-padding}, ${height / 2}) rotate(-90)`)\n            .attr(\"font-size\", fontsize)\n            .attr(\"text-anchor\", \"middle\")\n            .text(measure[0].field || \"Count\");\n        axis.append(\"path\")\n            .attr(\"class\", \"triangle\")\n            .attr(\"transform\", `translate(0, ${triangleSize / 25 * 2})`)\n            .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n            .attr(\"fill\", Color.AXIS);\n        axis.append(\"line\")\n            .attr(\"y1\", 0)\n            .attr(\"y2\", height)\n            .attr(\"stroke-width\", strokeWidth)\n            .attr(\"stroke\", Color.AXIS);\n    }\n\n    encodeXY() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        const factData = this.factdata();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        const xEncoding = breakdown[0].field,\n            yEncoding = (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field)\n\n        /** process data */\n        // get categories\n        let categoriesData = {};\n        factData.forEach((d, i) => {\n            if(categoriesData[d[xEncoding]]) {\n                categoriesData[d[xEncoding]].push(d);\n            } else {\n                categoriesData[d[xEncoding]] = [d];\n            }\n        });\n        // sum value group by category\n        let processedData = [];\n        for(let category in categoriesData) {\n            processedData.push({\n                [xEncoding]: category,\n                [yEncoding]: d3.sum(categoriesData[category], d => d[yEncoding])\n            })\n        }\n\n\n    \n        /** set the ranges */\n        let xScale = d3.scaleBand()\n            .range([0, width])\n            .domain(factData.map(d => d[xEncoding]));\n    \n        let yScale = d3.scaleLinear()\n            .range([height, 0])\n            .domain([0, d3.max(factData, d => d[yEncoding])])\n            .nice();\n    \n        /** draw axis */\n        let axis = svg.append(\"g\")\n            .attr(\"class\", \"axis\"),\n        content = svg.append(\"g\")\n            .attr(\"class\", \"content\")\n            .attr(\"chartWidth\", width)\n            .attr(\"chartHeight\", height);\n        let axisX = d3.axisBottom(xScale);\n    \n        let axisY = d3.axisLeft(yScale)\n            .ticks(5)\n            .tickSize(-height, 0, 0)\n            .tickPadding(5)\n            .tickFormat(function (d) {\n                if ((d / 1000000) >= 1) {\n                    d = d / 1000000 + \"M\";\n                } else if ((d / 1000) >= 1) {\n                    d = d / 1000 + \"K\";\n                }\n                return d;\n            });\n    \n        axis.append(\"g\")\n            .attr(\"class\", \"axis_x\")\n            .attr('transform', `translate(0, ${height})`)\n            .call(axisX);\n    \n    \n        axis.append(\"g\")\n            .attr(\"class\", \"axis_y\")\n            .call(axisY);\n\n        axis.selectAll(\".axis_y\")\n            .selectAll(\".domain\")\n            .attr(\"opacity\", 0);\n\n         /** draw grid */\n        axis.selectAll(\".axis_y\")\n            .selectAll(\"line\")\n            .attr(\"stroke\", d => {\n                if (d === 0) return Color().AXIS;\n                else return Color().DIVIDER;\n            })\n            .attr(\"class\", \"gridline\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", width)\n            .attr(\"y2\", 0)\n            .attr(\"opacity\", 1);\n\n        axis.selectAll(\".axis_x\")\n            .append(\"line\")\n            .attr(\"stroke\", Color().AXIS)\n            .attr(\"class\", \"gridline\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", -height)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 0);\n\n        /* draw labels */\n        const labelPadding = 20, fontsize = 12;\n        console.log(\"measure:\", measure)\n        console.log(\"breakdown:\",breakdown)\n\n        axis.append(\"text\")\n            .attr(\"x\", width / 2)\n            .attr(\"y\", height + svg.selectAll(\".axis_x\").select(\"path\").node().getBBox().height + labelPadding)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dominant-baseline\", \"hanging\")\n            .attr(\"font-size\", fontsize)\n            .text(`${breakdown[0].field} (${breakdown[0].pictype})` || \"Catogory\");\n\n        axis.append(\"text\")\n            .attr(\"transform\", `translate(${-labelPadding}, ${height / 2}) rotate(-90)`) \n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"font-size\", fontsize)\n            .text(`${measure[0].field} (${measure[0].aggregate})` || \"Count\");\n\n        /* draw lines */\n        const line = d3.line()\n        .x(d => xScale(d[xEncoding]))\n        .y(d => yScale(d[yEncoding]))\n\n        content.append(\"g\")\n            .attr(\"class\", \"lineGroup\")\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", Color().DEFAULT)\n            .attr(\"stroke-width\", 2)\n            .attr(\"opacity\", 1)\n            .selectAll(\"path\")\n            .data(processedData)\n            .enter()\n            .append(\"path\")\n            .attr(\"class\", \"path\")\n            .attr(\"d\" , line(processedData));\n\n        /* draw points */\n        const circleSize = Math.min(Math.ceil(Math.sqrt(height * width) / 50), 4);\n        content.append(\"g\")\n            .attr(\"class\", \"circleGroup\")\n            .attr(\"fill\", Color().DEFAULT)\n            .selectAll(\"circle\")\n            .data(processedData)\n            .enter().append(\"circle\")\n            .attr(\"class\", \"mark\")\n            .attr(\"r\", circleSize)\n            .attr(\"cx\", d => xScale(d[xEncoding]))\n            .attr(\"cy\", d => yScale(d[yEncoding]));\n    }\n\n    encodeColor() {\n        let width = this.width(),\n            height = this.height();\n        const factData = this.factdata();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        const xEncoding = breakdown[0].field,\n            yEncoding = (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field),\n            colorEncoding = breakdown.length < 2  ? null : breakdown[1].field;\n        \n        if(colorEncoding) {\n            let processedData = [];\n            /** get series */\n            let seriesData = {};\n            factData.forEach(d => {\n                if(seriesData[d[colorEncoding]]) {\n                    seriesData[d[colorEncoding]].push(d);\n                } else {\n                    seriesData[d[colorEncoding]] = [d];\n                }\n            });\n            processedData = seriesData;\n\n            /** set the ranges */\n            let xScale = d3.scaleBand()\n                .range([0, width])\n                .domain(factData.map(d => d[xEncoding]));\n\n            let yScale = d3.scaleLinear()\n                .range([height, 0])\n                .domain([0, d3.max(factData, d => d[yEncoding])])\n                .nice();\n\n            /* draw lines */\n            for(let factKey in processedData) {\n                const line = d3.line()\n                .x(d => xScale(d[xEncoding]))\n                .y(d => yScale(d[yEncoding]))\n\n                d3.select(\".content\")\n                    .append(\"g\")\n                    .attr(\"class\", \"lineGroup\")\n                    .attr(\"fill\", \"none\")\n                    .attr(\"stroke\", Color().DEFAULT)\n                    .attr(\"stroke-width\", 3)\n                    .attr(\"opacity\", 1)\n                    .selectAll(\"path\")\n                    .data(processedData[factKey])\n                    .enter()\n                    .append(\"path\")\n                    .attr(\"class\", \"path\")\n                    .attr(\"d\" , line(processedData[factKey]));\n            }\n\n            /* draw points */\n            const circleSize = Math.min(Math.ceil(Math.sqrt(height * width) / 50), 4);\n            for(let factKey in processedData) {\n                d3.select(\".content\")\n                    .append(\"g\")\n                    .attr(\"class\", \"circleGroup\")\n                    .attr(\"fill\", Color().DEFAULT)\n                    .selectAll(\"circle\")\n                    .data(processedData[factKey])\n                    .enter().append(\"circle\")\n                    .attr(\"class\", \"mark\")\n                    .attr(\"r\", circleSize)\n                    .attr(\"cx\", d => xScale(d[xEncoding]))\n                    .attr(\"cy\", d => yScale(d[yEncoding]));\n            }\n            \n            d3.selectAll(\".circleGroup\")\n                .attr(\"fill\", (d,i) => {\n                    return Color().CATEGORICAL[i]\n                })\n\n            d3.selectAll(\".lineGroup\")\n                .attr(\"stroke\", (d,i) => {\n                    return Color().CATEGORICAL[i]\n                })\n\n        } \n    }\n\n}\nexport default LineChart;","import * as d3 from 'd3';\nimport Chart from '../chart';\nimport Color from '../../visualization/color';\n\nlet X = 14\nlet Y = 14\n\nclass Scatterplot extends Chart {\n\n    visualize() {\n        // if (this.measure().length < 2) return;\n        let margin = {\n            \"top\": 20,\n            \"right\": 60,\n            \"bottom\": 60,\n            \"left\": 60\n        }\n        this.width(this.width() - margin.left - margin.right);\n        this.height(this.height() - margin.top - margin.bottom);\n        this._svg = d3.select(this.container())\n            .append(\"svg\")\n            .attr(\"width\", this.width() + margin.left + margin.right)\n            .attr(\"height\", this.height() + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        if (measure[0] && measure[1]) {\n            this.x = measure[0]\n            this.y = measure[1]\n        }\n        if (measure[2]) {\n            this.size = measure[2]\n        }\n        if (breakdown[1]) {\n            this.color = breakdown[1]\n        }\n\n        this.drawAxis();\n        this.encodeXY();\n        this.encodeColor();\n        this.encodeSize();\n        return this.svg();\n    }\n\n    drawAxis() {\n        if (this.x && this.y) {\n            let x = this.x,\n                y = this.y;\n            let svg = this.svg();\n            let width = this.width(),\n                height = this.height();\n            let fontsize = 16, strokeWidth = 2;\n            const padding = fontsize * 0.6,\n                triangleSize = Math.ceil(Math.sqrt(height * width) / 10);\n\n            let axis = svg.select('.axis');\n            svg.select(\".axis_x\").remove();\n            svg.select(\".axis_y\").remove();\n\n            axis.append(\"text\")\n                .attr(\"x\", width / 2)\n                .attr(\"y\", height + padding - 1)\n                .attr(\"font-size\", fontsize)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"dominant-baseline\", \"hanging\")\n                .text(x || \"Count\");\n            axis.append(\"path\")\n                .attr(\"class\", \"triangle\")\n                .attr(\"transform\", `translate(${width - triangleSize / 25 * 2}, ${height})rotate(90)`)\n                .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n                .attr(\"fill\", Color().AXIS);\n            axis.append(\"line\")\n                .attr(\"x1\", -strokeWidth / 2)\n                .attr(\"x2\", width)\n                .attr(\"y1\", height)\n                .attr(\"y2\", height)\n                .attr(\"stroke-width\", strokeWidth)\n                .attr(\"stroke\", Color().AXIS);\n            axis.append(\"text\")\n                .attr(\"transform\", `translate(${-padding}, ${height / 2}) rotate(-90)`)\n                .attr(\"font-size\", fontsize)\n                .attr(\"text-anchor\", \"middle\")\n                .text(y || \"Count\");\n            axis.append(\"path\")\n                .attr(\"class\", \"triangle\")\n                .attr(\"transform\", `translate(0, ${triangleSize / 25 * 2})`)\n                .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n                .attr(\"fill\", Color().AXIS);\n            axis.append(\"line\")\n                .attr(\"y1\", 0)\n                .attr(\"y2\", height)\n                .attr(\"stroke-width\", strokeWidth)\n                .attr(\"stroke\", Color().AXIS);\n        }\n    }\n\n    encodeXY() {\n        if (this.x && this.y) {\n            let svg = this.svg();\n            let width = this.width(),\n                height = this.height();\n            const processedData = this.processedData();\n            const xEncoding = this.x,\n                yEncoding = this.y;\n\n            let axis = svg.append(\"g\")\n                .attr(\"class\", \"axis\"),\n                content = svg.append(\"g\")\n                    .attr(\"class\", \"content\")\n                    .attr(\"chartWidth\", width)\n                    .attr(\"chartHeight\", height);\n\n            // set the ranges\n            let xScale = d3.scaleLinear()\n                .range([0, width])\n                .domain([0, X - 1])\n                .nice();\n\n            let yScale = d3.scaleLinear()\n                .range([height, 0])\n                .domain([0, Y - 1])\n                .nice();\n\n            this.xScale(xScale);\n            this.yScale(yScale);\n\n            let axisX = d3.axisBottom(xScale)\n                .ticks(5)\n                .tickPadding(5)\n                .tickFormat(function (d) {\n                    if ((d / 1000000) >= 1) {\n                        d = d / 1000000 + \"M\";\n                    } else if ((d / 1000) >= 1) {\n                        d = d / 1000 + \"K\";\n                    }\n                    return d;\n                });\n\n            let axisY = d3.axisLeft(yScale)\n                .ticks(5)\n                .tickPadding(5)\n                .tickFormat(function (d) {\n                    if ((d / 1000000) >= 1) {\n                        d = d / 1000000 + \"M\";\n                    } else if ((d / 1000) >= 1) {\n                        d = d / 1000 + \"K\";\n                    }\n                    return d;\n                });\n\n            axis.append(\"g\")\n                .attr(\"class\", \"axis_x\")\n                .attr('transform', `translate(0, ${height})`)\n                .call(axisX)\n\n            axis.append(\"g\")\n                .attr(\"class\", \"axis_y\")\n                .call(axisY);\n\n            // for grid line\n            // axis.selectAll(\".axis_y .tick\")\n            //     .append(\"line\")\n            //     .attr(\"stroke\", d => {\n            //         if (d === 0) return Color().AXIS;\n            //         else return Color().DIVIDER;\n            //     })\n            //     .attr(\"class\", \"gridline\")\n            //     .attr(\"x1\", 0)\n            //     .attr(\"y1\", 0)\n            //     .attr(\"x2\", width)\n            //     .attr(\"y2\", 0);\n\n            // axis.selectAll(\".axis_x .tick\")\n            //     .append(\"line\")\n            //     .attr(\"stroke\", Color().DIVIDER)\n            //     .attr(\"class\", \"gridline\")\n            //     .attr(\"x1\", 0)\n            //     .attr(\"y1\", -height)\n            //     .attr(\"x2\", 0)\n            //     .attr(\"y2\", 0);\n\n            axis.append(\"line\")\n                .attr(\"stroke\", Color().DIVIDER)\n                .attr(\"class\", \"gridline\")\n                .attr(\"x1\", width)\n                .attr(\"y1\", height)\n                .attr(\"x2\", width)\n                .attr(\"y2\", 0);\n\n            axis.append(\"line\")\n                .attr(\"stroke\", Color().DIVIDER)\n                .attr(\"class\", \"gridline\")\n                .attr(\"x1\", 0)\n                .attr(\"y1\", 0)\n                .attr(\"x2\", width)\n                .attr(\"y2\", 0);\n\n            /* draw labels */\n            const labelPadding = 20, fontsize = 16;\n\n            axis.append(\"text\")\n                .attr(\"x\", width / 2)\n                .attr(\"y\", height + svg.selectAll(\".axis_x\").select(\"path\").node().getBBox().height + labelPadding)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"dominant-baseline\", \"hanging\")\n                .attr(\"font-size\", fontsize)\n                .text(xEncoding);\n\n            axis.append(\"text\")\n                .attr(\"transform\", `translate(${-labelPadding - svg.selectAll(\".axis_y\").select(\"path\").node().getBBox().width}, ${height / 2}) rotate(-90)`)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"font-size\", fontsize)\n                .text(yEncoding);\n\n            /* draw points */\n            const circleSize = 8;\n            content.append(\"g\")\n                .attr(\"class\", \"circleGroup\")\n                .selectAll(\"circle\")\n                .data(processedData)\n                .enter().append(\"circle\")\n                .attr(\"class\", \"mark\")\n                .attr(\"r\", circleSize)\n                .attr(\"stroke\", \"#FFF\")\n                .attr(\"stroke-width\", 0)\n                .attr(\"fill\", Color().DEFAULT)\n                .attr(\"opacity\", 1)\n                .attr(\"cx\", d => xScale(d[xEncoding]))\n                .attr(\"cy\", d => yScale(d[yEncoding]));\n        }\n\n    }\n\n    encodeColor() {\n        if (this.color) {\n            let color = this.color;\n            let categories = Array.from(new Set(this.processedData().map(d => d[color])))\n            let svg = this.svg();\n            svg.selectAll(\"circle\")\n                .attr(\"fill\", (d) => {\n                    let i = categories.indexOf(d[color]);\n                    return Color().CATEGORICAL[i % 8]\n                })\n        }\n    }\n\n    encodeSize() {\n        if (this.size) {\n            let size = this.size;\n            let width = this.width(),\n                height = this.height();\n            let sizeEncoding = size;\n            const circleSize = Math.min(Math.ceil(Math.sqrt(height * width) / 40), 15);\n            const maxR = circleSize;\n            const minR = circleSize / 10;\n            let minValue = d3.min(this.processedData(), d => d[sizeEncoding]),\n                maxValue = d3.max(this.processedData(), d => d[sizeEncoding]);\n            let scale = d3.scaleSqrt([minValue, maxValue], [minR, maxR]);\n            let svg = this.svg();\n            svg.selectAll(\"circle\")\n                .attr(\"r\", d => scale(d[sizeEncoding]))\n        }\n    }\n\n    encodeShape() {\n\n    }\n\n    addEncoding(channel, field) {\n        if (!this[channel]) {\n            this[channel] = field.field;\n            this.svg().selectAll(\"g > *\").remove();\n            this.drawAxis();\n            if (this.x && this.y) this.encodeXY();\n            if (this.color) this.encodeColor();\n            if (this.size) this.encodeSize();\n        }\n    }\n\n    modifyEncoding(channel, field) {\n        if (this[channel]) {\n            this[channel] = field;\n            this.svg().selectAll(\"g > *\").remove();\n            this.drawAxis();\n            if (this.x && this.y) this.encodeXY();\n            if (this.color) this.encodeColor();\n            if (this.size) this.encodeSize();\n        }\n    }\n\n    removeEncoding(channel) {\n        this[channel] = null;\n        this.svg().selectAll(\"g > *\").remove();\n        if (this.x && this.y) this.encodeXY();\n        if (this.color) this.encodeColor();\n        if (this.size) this.encodeSize();\n    }\n}\n\nexport default Scatterplot;","import Color from '../../visualization/color';\n\nclass Unit {\n    constructor() {\n        this._id = 0;\n        this._x = 0;\n        this._y = 0;\n        this._radius = 0;\n        this._color = Color().DEFAULT;\n        this._visible = \"1\";\n        this._opacity = 1;\n        this._unitgroup = {};\n    }\n\n    id(value) {\n        if (!value) {\n            return this._id;\n        }\n        this._id = value;\n    }\n\n    data(value) {\n        if (!value) {\n            return this._dataItem;\n        }\n        Object.entries(value).forEach(\n            ([key, value]) => this[key] = value\n        )\n    }\n\n    unitgroup(key, value) {\n        if (!value && !key) {\n            return this._unitgroup;\n        }\n        this._unitgroup[key] = value;\n    }\n\n\n    x(value) {\n        if (!value) {\n            return this._x;\n        }\n        this._x = value;\n    }\n\n\n    y(value) {\n        if (!value) {\n            return this._y;\n        }\n        this._y = value;\n    }\n\n    radius(value) {\n        if (!value) {\n            return this._radius;\n        }\n        this._radius = value;\n    }\n\n    color(value) {\n        if (!value) {\n            return this._color;\n        }\n        this._color = value;\n    }\n\n    visible(value) {\n        if (!value) {\n            return this._visible;\n        }\n        this._visible = value;\n    }\n\n    opacity(value) {\n        if (!value) {\n            return this._opacity;\n        }\n        this._opacity = value;\n    }\n}\n\nexport default Unit;","import * as d3 from 'd3';\nimport Chart from '../chart';\nimport Color from '../../visualization/color';\nimport Unit from './unit';\nclass Unitvis extends Chart {\n\n    visualize() {\n        let margin = {\n            \"top\": 10,\n            \"right\": 10,\n            \"bottom\": 10,\n            \"left\": 10\n        }\n        this.delay = 1500\n        this.duration = 2500    \n        this.colorduration = 900\n        this.sizeduration = 1250\n        this.width(this.width() - margin.left - margin.right);\n        this.height(this.height() - margin.top - margin.bottom);\n        this.units = []\n        this._svg = d3.select(this.container())\n            .append(\"svg\")\n            .attr(\"width\", this.width() + margin.left + margin.right)\n            .attr(\"height\", this.height() + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        this.data()\n        this.initvis()\n\n        return this.svg();\n    }\n\n    data() {\n        let processedData = this.processedData();\n        processedData.forEach((d, i) => {\n            let unit = new Unit();\n            unit.id(i);\n            unit.data(d)\n            this.units.push(unit);\n        })\n        return this;\n    }\n\n    initvis() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n\n        const processedData = this.processedData()\n\n        let min = Math.min(width, height);\n        let vwidth = min;\n        let setLength = 50;\n        let setNumber = setLength * setLength;\n        let margin = {\n            left: vwidth / 10,\n            right: vwidth / 10\n        };\n\n        let maxSet = Math.ceil(processedData.length / setNumber);\n        let maxRow = Math.floor(Math.sqrt(maxSet));\n        let maxColumn = Math.ceil(maxSet / maxRow);\n        let radius = Math.min(((vwidth - margin.left - margin.right) / (maxColumn * (setLength + 1) - 1)), 6);\n\n        let row = Math.floor(Math.sqrt(processedData.length));\n        let column = Math.ceil(processedData.length / row); // row 3 col 4\n\n        let initX = vwidth / 2.2 - column * radius;\n        let initY = vwidth / 2 - row * radius;\n        let units = this.units.filter(d => d.visible() === \"1\");\n        let id = 0\n        for (let i = 0; i < row; i++) {\n            for (let j = 0; j < column; j++) {\n                let baseX = initX + 2.2 * radius * j;\n                let baseY = initY + 2.2 * radius * i;\n                if (id >= units.length) {\n                    break;\n                }\n                units[id].x(baseX);\n                units[id].y(baseY)\n                units[id].radius(radius);\n                id += 1\n            }\n        }\n\n        let content = svg.append(\"g\")\n            .attr(\"class\", \"content\")\n            .attr(\"chartWidth\", width)\n            .attr(\"chartHeight\", height);\n\n        content.append(\"g\")\n            .attr(\"class\", \"circleGroup\")\n            .selectAll(\"circle\")\n            .data(this.units)\n            .enter().append(\"circle\")\n            .attr(\"class\", \"mark\")\n            .attr(\"r\", d => d.radius())\n            .attr(\"stroke\", \"#FFF\")\n            .attr(\"stroke-width\", 0)\n            .attr(\"fill\", d => d.color())\n            .attr(\"opacity\", 1)\n            .attr(\"cx\", d => d.x())\n            .attr(\"cy\", d => d.y());\n\n    }\n\n    encodeX() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n\n\n        let margin = {\n            left: width / 20,\n            right: width / 20\n        }\n        let textSize = 14;\n\n        let breakdownField = this.x.field;\n\n        let databreakdown = d3.nest().key(function (d) { return d[breakdownField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n\n        let bar = databreakdown.length;\n\n        databreakdown.sort(function (x, y) {\n            return d3.ascending(x['key'], y['key']);\n        })\n\n\n        let breakdownValue = databreakdown.map(d => d['key']);\n        let count = databreakdown.map(d => d['value']);\n\n        let maxCount = d3.max(count);\n\n        let length = Math.ceil(30 / bar) < 5 ? Math.ceil(30 / bar) : 5\n\n        let wradius = ((width - margin.left - margin.right) / ((length + 2) * (bar - 1) + length)) / 2;\n        let hradius = height * 0.8 / Math.ceil(maxCount / length) / 2;\n\n        let radius = Math.min(wradius, hradius);\n        let s=(0.9*width-2*(bar)*length*radius)/(radius)/(bar+3)/2<1?0.2:Math.floor((0.9*width-2*(bar)*length*radius)/(radius)/(bar+3)/2)         \n\n        let padding = (0.9* width -bar*length*2*radius-(bar-1)*s*2*radius ) / 2\n        let baseX = d3.range(padding + radius, width-padding-(2*length-1)*radius+1, (width-2*padding-(2*length)*radius)/(bar-1));\n        let baseY = (height - Math.ceil(maxCount / length) * 2 * radius) / 2 + Math.ceil(maxCount / length) * 2 * radius - radius;\n        let visibleUnits = this.units.filter(d => d.visible() === \"1\");\n\n\n        let units = [];\n        for (let i = 0; i < bar; i++) {\n            let barUnits = visibleUnits.filter(d => d[breakdownField] === breakdownValue[i]);\n            units.push(barUnits);\n        }\n\n        // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n        svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n\n        units.forEach((bar, iBar) => {\n            svg.select(\".content\")\n                .append(\"text\")\n                .text(breakdownValue[iBar])\n                .attr(\"x\", baseX[iBar] + (length - 1) * radius)\n                // .attr(\"x\", baseX[iBar] + radius*6)\n                .attr(\"y\", baseY + radius + textSize)\n                .attr(\"font-size\", textSize)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"transform\", \"translate(\" + baseX[iBar] - radius + length * radius + \",\" + baseY + radius + textSize + \") rotate(-45)\")\n                // .attr(\"transform\", `rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`)\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n                \n\n            bar.forEach((d, i) => {\n                let row = Math.floor(i / length);\n                let col = i % length;\n                d.x(baseX[iBar] + 2 * radius * col);\n                d.y(baseY - 2 * radius * row);\n                d.radius(radius);\n                d.opacity(1);\n                d.unitgroup('x', breakdownField);\n            })\n\n            svg.select(\".content\").append(\"text\")\n                .text(breakdownField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", Math.min(baseY + 50, height))\n                .attr(\"font-size\", textSize)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay)\n                .duration(this.delay + this.duration/2)\n                .attr(\"fill-opacity\", 1)\n    });\n    }\n\n\n    encodeY() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n\n        if (this.x && !this.size) {\n\n\n            let margin = {\n                left: width / 20,\n                right: width / 20\n            }\n\n\n            let textSize;\n            let xField = this.units[0].unitgroup().x;\n            let yField = this.y.field;\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n            let yValueFreq = d3.nest().key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n\n            let xbar = xValueFreq.length;\n            let length = Math.ceil(30 / xbar) < 5 ? Math.ceil(30 / xbar) : 5\n            if (xbar >= 8) { textSize = 10; }\n            else { textSize = 14; }\n\n            let ybar = yValueFreq.length;\n\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            yValueFreq.sort(function (x, y) {\n                return d3.descending(x['key'], y['key']);\n            })\n\n            let xValue = xValueFreq.map(d => d['key']);\n            let yValue = yValueFreq.map(d => d['key']);\n\n            let unit = [];\n            let ymax = {}\n\n            let visibleUnits = this.units.filter(d => d.visible() === \"1\");\n\n            for (let i = 0; i < xbar; i++) {\n                let xunit = [];\n                let barUnits = visibleUnits.filter(d => d[xField] === xValue[i]);\n                for (let j = 0; j < ybar; j++) {\n                    let yuint = barUnits.filter(d => d[yField] === yValue[j]);\n                    if (!ymax[yValue[j]]) { ymax[yValue[j]] = yuint.length }\n                    if (yuint.length > ymax[yValue[j]]) {\n                        ymax[yValue[j]] = yuint.length\n                    }\n                    xunit.push({ \"x\": xValue[i], \"y\": yValue[j], \"data\": yuint })\n                }\n                unit.push(xunit);\n            }\n\n            let xmaxCount = 0\n            for (const [key, value] of Object.entries(ymax)) {\n                xmaxCount += Math.ceil(value / length);\n            }\n\n\n            let wradius = ((width - margin.left - margin.right) / ((length +1) * (xbar - 1) + length)) / 2.2;\n            let hradius = d3.min([(height * 0.9-2*textSize) / (xmaxCount )/ 2,(height * 0.9-2*textSize) / ybar/(Math.ceil( length)+1)/ 2]);\n            let radius =1.0* Math.min(wradius, hradius);\n            let textpadding = 10\n            let baseX = xValueFreq.map(function (d, i) {\n                if (xbar === 1) {\n\n                    return (width - length * radius * 2.2) / 2\n                }\n                else if (xbar >= 2) {\n                    let s=(0.9*width-2*(xbar)*length*radius)/(radius)/(xbar+3)/2<1?0.2:Math.floor((0.9*width-2*(xbar)*length*radius)/(radius)/(xbar+3)/2)         \n                    let leftPadding = (1* width -xbar*length*2*radius-(xbar-1)*s*2*radius ) / 2+1*margin.left\n                    return leftPadding + (width-2*leftPadding)/(xbar-1)*i;\n                }\n            })\n\n            let topPadding = d3.max([(height - xmaxCount * radius * 2 - ybar * radius * 2 - 2 * textpadding) / 2,0.025*height])\n            let baseY = [topPadding]\n\n            let y = baseY[0]\n            for (let i = 0; i < ybar; i++) {\n                y += ymax[yValue[i]] / length * 2 * radius + 10\n                baseY.push(y)\n            }\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n\n            for (let i = 0; i < xbar; i++) {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xValue[i])\n                    .attr(\"x\", baseX[i] + (length - 1) * radius)\n                    // .attr(\"x\", baseX[iBar] + radius*6)\n                    .attr(\"y\", baseY[baseY.length - 1] + textpadding)\n                    .attr(\"font-size\", textSize)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", \"translate(\" + baseX[i] - radius + length * radius + \",\" + baseY[baseY.length - 1] + radius + textSize + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n    \n                let xbar = unit[i]\n                for (let j = 0; j < ybar; j++) {\n                    svg.select(\".content\")\n                        .append(\"text\")\n                        .text(yValue[j])\n                        .attr(\"x\", baseX[0] - radius - 2 * textpadding)\n                        // .attr(\"x\", baseX[iBar] + radius*6)\n                        .attr(\"y\", baseY[j] + radius * 2)\n                        .attr(\"font-size\", textSize)\n                        .attr(\"text-anchor\", \"end\")\n                        .attr(\"transform\", \"translate(\" + baseY[0] + radius + textSize - radius + length * radius + \",\" + baseY[j] + radius * 3 + radius + textSize + \") rotate(-45)\")\n                        // .attr(\"transform\", `rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`)\n                        .attr(\"fill-opacity\", 0)\n                        .transition()\n                        .delay(this.delay + this.duration/2)\n                        .duration(this.duration/2)\n                        .attr(\"fill-opacity\", 1)\n    \n                    let x = baseX[i]\n                    let y = baseY[j]\n\n                    let yset = xbar[j]\n                    if (yset) {\n                        yset['data'].forEach((d, i) => {\n                            let row = Math.floor(i / length);\n                            let col = i % length;\n                            d.x(x + 2 * radius * col);\n                            d.y(y + 2 * radius * row);\n                            d.radius(radius);\n                            d.opacity(1);\n                            d.unitgroup('y', yField);\n\n                        })\n                    }\n                }\n\n\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xField)\n                    .attr(\"x\", width / 2)\n                    .attr(\"y\", Math.min(baseY[baseY.length - 1] + 3 * textSize, height))\n                    .attr(\"font-size\", textSize)\n                    .attr('text-anchor', 'middle')\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration)\n                    .attr(\"fill-opacity\", 1)\n\n\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(yField)\n                    .attr(\"x\", baseX[0] - radius - 2 * textpadding - 3.5 * textSize)\n                    .attr(\"y\", height / 2)\n                    .attr(\"font-size\", textSize)\n                    .attr('text-anchor', 'middle')\n                    .attr(\"transform\", `rotate(-90, ${baseX[0] - radius - 2 * textpadding - 3.5 * textSize}, ${height / 2})`)\n                    .attr('text-anchor', 'middle')\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n            }\n        }\n        else if (!this.x) {\n\n            let margin = {\n                left: width / 20,\n                right: width / 20\n            }\n            let textSize = 14;\n\n            let breakdownField = this.y.field;\n\n            let databreakdown = d3.nest().key(function (d) { return d[breakdownField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n\n            let bar = databreakdown.length;\n\n            databreakdown.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n\n            let breakdownValue = databreakdown.map(d => d['key']);\n            let count = databreakdown.map(d => d['value']);\n\n            let maxCount = d3.max(count);\n            // wradius -> calculated radius based on width\n            // hradius -> calculated radius based on height\n\n            let length = Math.ceil(30 / bar) < 5 ? Math.ceil(30 / bar) : 5\n\n            let wradius = d3.min([width - margin.left - margin.right,0.8*width])/ Math.ceil(maxCount / length) / 2;\n            let hradius = height * 0.8 /bar/(Math.ceil( length)+1)/ 2;\n            \n            let radius = 0.9*Math.min(wradius, hradius);\n            let s=(0.9*height-2*(bar)*length*radius)/(radius)/(bar+3)/2<1?0.2:Math.floor((0.9*height-2*(bar)*length*radius)/(radius)/(bar+3)/2)                 \n            let padding = (0.9* height -bar*length*2*radius-(bar-1)*s*2*radius ) / 2\n            let baseY = d3.range(padding , height-padding-(2*length-1)*radius+1,(height-padding-(2*length-1)*radius-padding)/(bar-1));\n            let rowTotalWidth = d3.min([Math.ceil(maxCount / length) * 2 * radius, width * 0.8])\n            let baseX = (0.9 * width - rowTotalWidth) / 2 + 4 * textSize + radius\n\n            let visibleUnits = this.units.filter(d => d.visible() === \"1\");\n\n\n            let units = [];\n            for (let i = 0; i < bar; i++) {\n                let barUnits = visibleUnits.filter(d => d[breakdownField] === breakdownValue[i]);\n                units.push(barUnits);\n            }\n\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            units.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(breakdownValue[iBar])\n                    .attr(\"x\", baseX - radius - 2 * textSize)\n                    // .attr(\"x\", baseX[iBar] + radius*6)\n                    .attr(\"y\", baseY[iBar] + (length - 3) * radius)\n                    .attr(\"font-size\", textSize)\n                    .attr(\"text-anchor\", \"middle\")\n                    // .attr(\"transform\", \"translate(\"+baseX[iBar]-radius+length*radius+\",\"+baseY+radius+textSize+\") rotate(-45)\")\n                    .attr(\"transform\", `rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`)\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay)\n                    .duration(this.delay + this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n                bar.forEach((d, i) => {\n                    let col = Math.floor(i / length);\n                    let row = i % length;\n                    d.x(baseX + 2 * radius * col);\n                    d.y(baseY[iBar] + 2 * radius * row);\n                    d.radius(radius);\n                    d.opacity(1);\n                    d.unitgroup('x', breakdownField);\n                })\n\n                svg.select(\".content\").append(\"text\")\n                    .text(breakdownField)\n                    .attr(\"x\", Math.min(baseX - radius - 4 * textSize, width))\n                    .attr(\"y\", height / 2)\n                    .attr(\"font-size\", textSize)\n                    .attr(\"transform\", `rotate(-90, ${Math.min(baseX - radius - 4 * textSize, width)}, ${height / 2})`)\n                    .attr('text-anchor', 'middle')\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n            });\n\n        }\n        else if (this.x && this.size) {\n            let textSize = 14;\n            let xField = this.units[0].unitgroup().x;\n            let yField = this.y.field;\n            let sizeField = this.units[0].unitgroup().size\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n            let yValueFreq = d3.nest().key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            yValueFreq.sort(function (x, y) {\n                return d3.descending(x['key'], y['key']);\n            })\n\n            let num_of_x = xValueFreq.length;\n            let num_of_y = yValueFreq.length;\n\n            let column = num_of_x\n            let row = num_of_y\n\n\n            let maxR = d3.min([0.8 * height / (row + 1) / 2, 0.8 * width / (column + 1) / 2])\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            xValueFreq.forEach(d => {\n                d.values.sort(function (x, y) {\n                    return d3.descending(x['key'], y['key'])\n                })\n            });\n\n            let nodesmaxcount = 0\n\n            for (let i = 0; i < num_of_x; i++) {\n                let MaxNodeinEach = d3.max(xValueFreq[i].values, function (j) { return j.value; })\n                nodesmaxcount = Math.max(nodesmaxcount, MaxNodeinEach)\n            }\n\n            let averageradius;\n            let ratio\n            if (column > 4) { averageradius = Math.sqrt(nodesmaxcount) / 3; ratio = 1.5; }\n            else { averageradius = Math.sqrt(nodesmaxcount) / 2; ratio = 1.8; }\n\n            let radiusa = maxR / Math.sqrt(averageradius) * ratio;\n            let rowTotalWidth;\n\n            if (column % 2 === 0) {\n                rowTotalWidth = 2.1 * maxR * column;//2.4\n            } else {\n                rowTotalWidth = 2.1 * maxR * (column + 1);\n            }\n\n            let twosideleft = 30\n            let Minleftpadding = 2 * maxR + 3 * textSize + twosideleft\n            rowTotalWidth = d3.min([rowTotalWidth, width * 0.8])\n            let centernodex = xValueFreq.map(function (d, i) {\n\n                if (0.9 * width - rowTotalWidth - 2 * twosideleft - 2 * Minleftpadding > 0) {\n                    let leftpadding = (0.9 * width - rowTotalWidth - 2 * twosideleft - 2 * Minleftpadding) / 2 + 2 * twosideleft +  Minleftpadding\n                    let paddingMaxR\n                    if(column>5)\n                        paddingMaxR = 3.3\n                    else\n                        paddingMaxR = 1\n\n                    return leftpadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n                else if (0.9 * width - rowTotalWidth - 2 * twosideleft - 2 * Minleftpadding < 0) {\n                    let leftpadding = Minleftpadding\n                    let paddingMaxR = 1;\n                    return leftpadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n\n\n                if (column === 1) {\n                    if (xValueFreq.length === 2) {//异常处理\n                        return i === 0 ? radiusa : 3.1 * maxR + radiusa\n                    }\n                    return (width - radiusa) / 2\n                }\n                else if (column > 4 && row > 2) {\n                    rowTotalWidth = d3.min([rowTotalWidth, width])\n                    return 10 + 1.0 * Minleftpadding + rowTotalWidth / (column - 1) * (i);\n                }\n                else {\n                    rowTotalWidth = d3.min([rowTotalWidth, width * 0.9])\n                    return 10 + 1.0 * Minleftpadding + rowTotalWidth / (column - 1) * (i)\n\n                }\n            })\n\n            let columnTotalHeight;\n            if (row % 2 === 0) {\n                columnTotalHeight = 2 * maxR * row;//2.4\n            } else {\n                columnTotalHeight = 2 * maxR * (row + 1);\n            }\n\n            let centernodey = yValueFreq.map(function (d, i) {\n                if (row > 2) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.8])\n                    let topPadding = (0.8 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * (i);\n                }\n                else {\n                    let topPadding = ((height - 3.6 * maxR) / (row - 1) <= 3 * maxR ? 3 * maxR : (height - 3 * maxR * (row - 1)) / 1.4);\n                    return topPadding + d3.min([(height - 3.6 * maxR) / (row - 1), 3 * maxR]) * (i);\n                }\n            })\n            let unitnew = [];\n            let nodesvalue1 = [];\n            let xValue = xValueFreq.map(d => d['key']);\n            let yValue = yValueFreq.map(d => d['key']);\n            unitnew = this.units.map(function (d, i) {\n                nodesvalue1[i] = d[sizeField]\n                return {\n                    id: d.id(),\n                    distribution: d[xField],\n                    category: [xValue.indexOf(d[xField]), yValue.indexOf(d[yField])],\n                    radius: 0,\n                    value: d[sizeField]\n                }\n            })\n\n            let unitExtent = d3.extent(this.units, d => d[sizeField]); //d3.extent(focusextent1.concat(focusextent2))\n            let size = d3.scaleLinear()\n                .domain([unitExtent[0], unitExtent[1]])\n                .range([radiusa / 100, radiusa]);\n\n            for (let index in unitnew) {\n                unitnew[index].radius = Math.sqrt(size(unitnew[index].value))\n            }\n\n\n            let simulation = d3.forceSimulation(unitnew)\n                .force('charge', d3.forceManyBody().strength(0.01))\n                .force('x', d3.forceX().x(function (d) {\n                    return centernodex[d.category[0]]\n                }))\n                .force('y', d3.forceY().y(function (d) {\n                    return centernodey[d.category[1]];\n                }))\n                .force('collision', d3.forceCollide().strength(1).radius(d => d.radius + 0.15))\n                .stop()\n\n\n            simulation.tick(200);\n            for (let index in this.units) {\n\n                let f = unitnew.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    this.units[f.id].x(f.x);\n                    this.units[f.id].y(f.y);\n                    this.units[f.id].visible(\"1\")\n                    this.units[index].radius(f.radius)\n                    this.units[f.id].color(f.color)\n                }\n                else {\n                    this.units[index].visible(\"0\")\n                }\n\n                this.units[index].opacity(\"1\")\n            }\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            xValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xValue[iBar])\n                    .attr(\"x\", centernodex[iBar])\n                    .attr(\"y\", centernodey[centernodey.length - 1] + 2 * maxR)\n                    .attr(\"font-size\", textSize * 0.8)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n            })\n\n            yValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(yValue[iBar])\n                    .attr(\"x\", centernodex[0] - 2 * maxR)\n                    .attr(\"y\", centernodey[iBar])\n                    .attr(\"font-size\", textSize * 0.8)\n                    .attr(\"text-anchor\", \"end\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n            })\n\n\n            svg.select(\".content\").append(\"text\")\n                .text(xField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", Math.min(centernodey[centernodey.length - 1] + 2 * maxR + 3 * textSize, height))\n                .attr(\"font-size\", textSize * 0.9)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n            svg.select(\".content\").append(\"text\")\n                .text(yField)\n                .attr(\"x\", centernodex[0] - 2 * maxR - 3 * textSize)\n                .attr(\"y\", height / 2)\n                .attr(\"font-size\", textSize * 0.9)\n                .attr('text-anchor', 'middle')\n                .attr(\"transform\", `rotate(-90, ${centernodex[0] - 2 * maxR - 3 * textSize}, ${height / 2})`)\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n    }\n    }\n\n\n    encodeColor() {\n        if (this.color) {\n            let colorField = this.color.field;\n            let colorFreqValue = d3.nest().key(function (d) { return d[colorField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n            let colorValue = colorFreqValue.map(d => d['key']);\n\n            let units = [];\n            for (let i = 0; i < colorFreqValue.length; i++) {\n                let colorUnits = this.units.filter(d => d[colorField] === colorValue[i]);\n                units.push(colorUnits);\n            }\n\n            units.forEach((color, iColor) => {\n\n                color.forEach((d) => {\n                    d.color(Color().CATEGORICAL[iColor % 8]);\n                    d.unitgroup('color', colorField);\n                })\n            })\n        }\n    }\n\n\n    encodeSize() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n\n\n            \n\n        if (this.x && this.y && this.size) {\n            let textSize = 14;\n\n            let xField = this.units[0].unitgroup().x;\n            let yField = this.units[0].unitgroup().y;\n            let sizeField = this.size.field\n\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n            let yValueFreq = d3.nest().key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            yValueFreq.sort(function (x, y) {\n                return d3.descending(x['key'], y['key']);\n            })\n\n\n            let num_of_x = xValueFreq.length;\n            let num_of_y = yValueFreq.length;\n\n            let column = num_of_x\n            let row = num_of_y\n\n\n            let maxR = d3.min([0.8 * height / (row + 1) / 2, 0.8 * width / (column + 1) / 2])\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            xValueFreq.forEach(d => {\n                d.values.sort(function (x, y) {\n                    return d3.descending(x['key'], y['key'])\n                })\n            });\n\n            let nodesmaxcount = 0\n\n            for (let i = 0; i < num_of_x; i++) {\n                let MaxNodeinEach = d3.max(xValueFreq[i].values, function (j) { return j.value; })\n                nodesmaxcount = Math.max(nodesmaxcount, MaxNodeinEach)\n            }\n\n            let averageradius;\n            let ratio\n            if (column > 4) { averageradius = Math.sqrt(nodesmaxcount) / 3; ratio = 1.5; }\n            else { averageradius = Math.sqrt(nodesmaxcount) / 2; ratio = 1.8; }\n            let radiusa = maxR / Math.sqrt(averageradius) * ratio;\n            let rowTotalWidth;\n\n            rowTotalWidth=2.1*maxR*(column)\n\n            function textSizef(fontSize,fontFamily,text){\n                var span = document.createElement(\"span\");\n                var result = {};\n                result.width = span.offsetWidth;\n                result.height = span.offsetHeight;\n                span.style.visibility = \"hidden\";\n                span.style.fontSize = fontSize;\n                span.style.fontFamily = fontFamily;\n                span.style.display = \"inline-block\";\n                document.body.appendChild(span);\n                if(typeof span.textContent != \"undefined\"){\n                  span.textContent = text;\n                }else{\n                  span.innerText = text;\n                }\n                result.width = parseFloat(window.getComputedStyle(span).width) - result.width;\n                result.height = parseFloat(window.getComputedStyle(span).height) - result.height;\n                return result;\n              }\n\n\n            let strlen = yValueFreq.map(d => textSizef(textSize,'Arial',d['key']).width)\n            let strmax = d3.max(strlen)\n            \n            let Minleftpadding =  2*maxR +2*textSize+textSizef(textSize,'Arial',yField).height+strmax\n            rowTotalWidth = d3.min([rowTotalWidth, width * 0.8])\n\n            let centernodex = xValueFreq.map(function (d, i) {\n                if (column === 1) {\n                    if (xValueFreq.length === 2) {//异常处理\n                        return i === 0 ? radiusa : 3.1 * maxR + radiusa\n                    }\n                    return (width - radiusa) / 2\n                }\n                else {\n                    \n                    if (0.9 * width - rowTotalWidth - 2 * Minleftpadding > 0) {\n                        let rowTotalWidth1=0.9 * width - 2 * Minleftpadding \n                        let leftpadding = (1 * width - rowTotalWidth1  - 2 * Minleftpadding) / 2 + Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n                        \n                    }\n                    else if (0.9 * width - rowTotalWidth  - 2 * Minleftpadding <=0) {\n                        let leftpadding = 1*Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n\n                        \n                    }\n                }\n            })\n\n            let columnTotalHeight;\n            if (row % 2 === 0) {\n                columnTotalHeight = 2 * maxR * row;//2.4\n            } else {\n                columnTotalHeight = 2 * maxR * (row + 1);\n            }\n\n            let centernodey = yValueFreq.map(function (d, i) {\n                if (row > 2) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.8])\n                    let topPadding = (0.8 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * (i);\n                }\n                else {\n                    let topPadding = ((height - 3.6 * maxR) / (row - 1) <= 3 * maxR ? 3 * maxR : (height - 3 * maxR * (row - 1)) / 1.4);\n                    return topPadding + d3.min([(height - 3.6 * maxR) / (row - 1), 3 * maxR]) * (i);\n                }\n            })\n            let unitnew = [];\n            let nodesvalue1 = [];\n            let xValue = xValueFreq.map(d => d['key']);\n            let yValue = yValueFreq.map(d => d['key']);\n            unitnew = this.units.map(function (d, i) {\n                nodesvalue1[i] = d[sizeField]\n                return {\n                    id: d.id(),\n                    distribution: d[xField],\n                    category: [xValue.indexOf(d[xField]), yValue.indexOf(d[yField])],\n                    radius: 0,\n                    value: d[sizeField]\n                }\n            })\n\n            let unitExtent = d3.extent(this.units, d => d[sizeField]); //d3.extent(focusextent1.concat(focusextent2))\n            let size = d3.scaleLinear()\n                .domain([unitExtent[0], unitExtent[1]])\n                .range([radiusa / 100, radiusa]);\n\n            for (let index in unitnew) {\n                unitnew[index].radius = Math.sqrt(size(unitnew[index].value))\n            }\n\n\n            let simulation = d3.forceSimulation(unitnew)\n                .force('charge', d3.forceManyBody().strength(0.01))\n                .force('x', d3.forceX().x(function (d) {\n                    return centernodex[d.category[0]]\n                }))\n                .force('y', d3.forceY().y(function (d) {\n                    return centernodey[d.category[1]];\n                }))\n                .force('collision', d3.forceCollide().strength(1).radius(d => d.radius + 0.15))\n                .stop()\n\n\n            simulation.tick(200);\n            for (let index in this.units) {\n\n                let f = unitnew.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    this.units[f.id].x(f.x);\n                    this.units[f.id].y(f.y);\n                    this.units[f.id].visible(\"1\")\n                    this.units[index].radius(f.radius)\n                    this.units[f.id].color(f.color)\n                    this.units[f.id].unitgroup('size',sizeField)\n                }\n                else {\n                    this.units[index].visible(\"0\")\n                }\n\n                this.units[index].opacity(\"1\")\n            }\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            xValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xValue[iBar])\n                    .attr(\"x\", centernodex[iBar])\n                    .attr(\"y\", centernodey[centernodey.length - 1] + 2 * maxR)\n                    .attr(\"font-size\", textSize * 0.8)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n            })\n\n            yValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(yValue[iBar])\n                    .attr(\"x\", centernodex[0] - 2 * maxR)\n                    .attr(\"y\", centernodey[iBar])\n                    .attr(\"font-size\", textSize * 0.8)\n                    .attr(\"text-anchor\", \"end\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n            })\n\n\n            svg.select(\".content\").append(\"text\")\n                .text(xField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", Math.min(centernodey[centernodey.length - 1] + 2 * maxR + 3 * textSize, height))\n\n                .attr(\"font-size\", textSize * 0.9)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n\n            svg.select(\".content\").append(\"text\")\n                .text(yField)\n                .attr(\"x\", centernodex[0] - 2 * maxR - 3 * textSize)\n                .attr(\"y\", height / 2)\n                .attr(\"font-size\", textSize * 0.9)\n                .attr('text-anchor', 'middle')\n                .attr(\"transform\", `rotate(-90, ${centernodex[0] - 2 * maxR - 3 * textSize}, ${height / 2})`)\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n    }\n        else if (this.x && this.size) {\n            let xField = this.units[0].unitgroup().x;\n\n            let sizeField = this.size.field;\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            let xValue = xValueFreq.map(d => d['key']);\n\n            let categories = xValueFreq\n\n            let row = 1\n            let column = xValueFreq.length\n\n            let maxR = d3.min([0.8 * height / (row + 1) / 2, 0.8 * width / (column + 1) / 2])\n\n\n            let nodesmaxcount = d3.max(xValueFreq, function (d) { return d.value; })\n\n\n            let averageradius;\n            if (column > 4)\n                averageradius = Math.sqrt(nodesmaxcount) / 3;\n            else\n                averageradius = Math.sqrt(nodesmaxcount) / 2;\n\n            let ratio = 1.8;\n            let radiusa = maxR / Math.sqrt(averageradius) * ratio;\n\n            let rowTotalWidth;\n            if (categories.length % 2 === 0) {\n                rowTotalWidth = 2.5 * maxR * column;//2.4\n            } else {\n                rowTotalWidth = 2.5 * maxR * (column + 1);\n            }\n\n            rowTotalWidth = d3.min([rowTotalWidth, width * 0.9])\n\n\n            let centernodex = xValueFreq.map(function (d, i) {\n                if (column === 1) {\n                    if (xValueFreq.length === 2) {//\n                        return i === 0 ? radiusa : 3.1 * maxR + radiusa\n                    }\n                    return (width - radiusa) / 2\n                }\n                else {\n                    rowTotalWidth = d3.min([rowTotalWidth, width])\n                    let paddingMaxR = 3.3;\n                    let leftPadding = (width - (rowTotalWidth - paddingMaxR * maxR)) / 2;\n                    return leftPadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n            })\n\n            let centernodey = xValueFreq.map(function (d, i) {\n                let startPoint = ((height - 3.6 * maxR - 5 * radiusa) / (row - 1) <= 3 * maxR ? 1.8 * maxR : (height - 3 * maxR * (row - 1) - 5 * radiusa) / 1.4);\n                return startPoint + d3.min([(height - 3.6 * maxR) / (row - 1), 3 * maxR]) * (Math.floor(i / column));\n            })\n\n            let unitnew = [];\n            let nodesvalue1 = [];\n\n            unitnew = this.units.map(function (d, i) {\n                nodesvalue1[i] = d[sizeField]\n                return {\n                    id: d.id(),\n                    distribution: d[xField],\n                    category: xValue.indexOf(d[xField]),\n                    radius: 0,\n                    value: d[sizeField]\n                }\n            })\n\n            let unitExtent = d3.extent(this.units, d => d[sizeField]); //d3.extent(focusextent1.concat(focusextent2))\n            let size = d3.scaleLinear()\n                .domain([unitExtent[0], unitExtent[1]])\n                .range([radiusa / 100, radiusa]);\n\n            for (let index in unitnew) {\n                unitnew[index].radius = Math.sqrt(size(unitnew[index].value))\n            }\n\n            let simulation = d3.forceSimulation(unitnew)\n                .force('charge', d3.forceManyBody().strength(0.01))\n                .force('x', d3.forceX().x(function (d) {\n                    return centernodex[d.category]\n                }))\n                .force('y', d3.forceY().y(function (d) {\n                    return centernodey[d.category];\n                }))\n                .force('collision', d3.forceCollide().strength(1).radius(d => d.radius + 0.15))\n                .stop()\n\n            simulation.tick(200);\n\n            for (let index in this.units) {\n\n                let f = unitnew.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    this.units[f.id].x(f.x);\n                    this.units[f.id].y(f.y);\n                    this.units[f.id].visible(\"1\")\n                    this.units[index].radius(f.radius)\n                    this.units[f.id].color(f.color)\n                    this.units[f.id].unitgroup('size',sizeField)\n\n                }\n                else {\n                    this.units[index].visible(\"0\")\n                }\n\n                this.units[index].opacity(\"1\")\n            }\n            \n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            xValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\").append(\"text\")\n                    .text(xValue[iBar])\n                    .attr(\"x\", centernodex[iBar])\n                    .attr(\"y\", centernodey[0] + 2 * radiusa + 1 * maxR)\n                    .attr(\"font-size\", 14)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    // .attr(\"transform\", `rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`)\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n            })\n\n            svg.select(\".content\").append(\"text\")\n                .text(xField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", Math.min(centernodey[0] + 2 * radiusa + 2 * maxR, height))\n                .attr(\"font-size\", 14)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n        }\n        else {\n            let units = this.units.filter(d => d.visible() === \"1\");\n            let sizeField = this.size.field\n\n            let allcenter = {\n                xcenter: width / 2,\n                ycenter: height / 2\n            };\n\n            // circle size and position calculation\n            let nodesradius = [];\n            let nodesvalue1 = [];\n\n            nodesradius = units.map((d, i) => {\n                nodesvalue1[i] = d[sizeField];\n                return {\n                    id: d.id(),\n                    radius: d.radius(),\n                    value: d[sizeField]\n                }\n            });\n\n            let focusextent1 = d3.extent(units, d => d[sizeField]);\n            let nodesScale = d3.scaleLinear()\n                .domain([focusextent1[0], focusextent1[1]])\n                // .range([height / 300 * height / 300, height / 30 * height / 30])\n                .range(units.length > 800 ?\n                    [height / 500 * height / 800, height / 50 * height / 80]\n                    //  : [height / 300 * height / 300, height / 30 * height / 30]);\n                    : [height / 500 * height / 500, height / 50 * height / 50]);\n\n\n            for (let index in nodesradius) {\n                nodesradius[index].radius = Math.sqrt(nodesScale(nodesradius[index].value));\n            }\n\n            let simulation = d3.forceSimulation(nodesradius)\n                .force('charge', d3.forceManyBody().strength(1))\n                .force('center', d3.forceCenter(allcenter.xcenter, allcenter.ycenter))\n                .force(\"collide\", d3.forceCollide().radius((d, i) => d.radius + 0.5).iterations(2))\n\n            simulation.tick(nodesvalue1.length > 800 ? 100 : 200);\n\n\n            for (let index in units) {\n                let f = nodesradius.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    units[f.id].x(f.x);\n                    units[f.id].y(f.y);\n                    units[f.id].visible(\"1\")\n                    units[f.id].radius(f.radius)\n                    units[f.id].unitgroup('size',sizeField)\n\n                }\n                else {\n                    units[index].visible(\"0\")\n                }\n\n                units[index].opacity(\"1\")\n            }\n\n        }\n\n    }\n\n\n    encodeShape() {\n\n    }\n\n    addEncoding(channel, field) {\n        if (!this[channel]) {\n            this[channel] = field;\n\n            let changesize = false;\n            let changecolor = false;\n            let changelayout = false;\n\n            switch (channel) {\n                case 'x':\n                    this.encodeX();\n                    changelayout = true\n                    break;\n                case 'y':\n                    this.encodeY();\n                    changelayout = true\n                    break;\n                case 'size':\n                    this.encodeSize();\n                    changelayout = true\n                    changesize = true\n                    break;\n                case 'color':\n                    this.encodeColor();\n                    changecolor = true\n                    break;\n                default:\n                    console.log('no channel select')\n            }\n\n            if (changecolor) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change color\")\n                    .delay(this.delay)\n                    .duration(this.colorduration)\n                    .attr(\"fill\", d => d.color());\n            }\n\n            if (changesize) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change size\")\n                    .delay(this.delay)\n                    .duration(this.sizeduration)\n                    .attr(\"r\", d => d.radius());\n            }\n\n            if (changelayout) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change layout\")\n                    .delay(this.delay)\n                    .duration(this.duration)\n                    .attr(\"cx\", d => d.x())\n                    .attr(\"cy\", d => d.y())\n                    .attr(\"r\", d => d.radius())\n                    .style(\"opacity\", d => d.opacity());\n            }\n            this.delay += (changecolor? this.colorduration: 0) + (changesize? this.sizeduration: 0) + (changelayout? this.duration: 0)\n\n\n\n\n        }\n\n    }\n\n\n    modifyEncoding(channel, field) {\n        if (this[channel]) {\n            this[channel] = field;\n\n            let changesize = false;\n            let changecolor = false;\n            let changelayout = false;\n\n            switch (channel) {\n                case 'x':\n                    this.encodeX();\n                    changelayout = true\n                    break;\n                case 'y':\n                    this.encodeY();\n                    changelayout = true\n                    break;\n                case 'size':\n                    this.encodeSize();\n                    changelayout = true\n                    changesize = true\n                    break;\n                case 'color':\n                    this.encodeColor();\n                    changecolor = true\n                    break;\n                default:\n                    console.log('no channel select')\n            }\n\n            if (changecolor) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change color\")\n                    .delay(this.delay)\n                    .duration(this.colorduration)\n                    .attr(\"fill\", d => d.color());\n            }\n\n            if (changesize) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change size\")\n                    .delay(this.delay)\n                    .duration(this.sizeduration)\n                    .attr(\"r\", d => d.radius());\n            }\n\n            if (changelayout) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change layout\")\n                    .delay(this.delay)\n                    .duration(this.duration)\n                    .attr(\"cx\", d => d.x())\n                    .attr(\"cy\", d => d.y())\n                    .attr(\"r\", d => d.radius())\n                    .style(\"opacity\", d => d.opacity());\n            }\n\n            this.delay += (changecolor? this.colorduration: 0) + (changesize? this.sizeduration: 0) + (changelayout? this.duration: 0)\n        }\n    }\n\n    removeEncoding(channel) {\n        this[channel] = null;\n\n        let changesize = false;\n        let changecolor = false;\n        let changelayout = false;\n\n        if (this.x) { this.encodeX(); changelayout = true }\n\n        if (this.y) { this.encodeY(); changelayout = true }\n\n        if (this.size) { this.encodeSize(); changesize = true }\n\n        if (this.color) { this.encodeColor(); changecolor = true }\n        \n        if (changecolor) {\n            this.svg().select(\".content\")\n                .selectAll(\"circle\")\n                .transition(\"change color\")\n                .delay(this.delay)\n                .duration(this.colorduration)\n                .attr(\"fill\", d => d.color());\n        }\n\n        if (changesize) {\n            this.svg().select(\".content\")\n                .selectAll(\"circle\")\n                .transition(\"change size\")\n                .delay(this.delay)\n                .duration(this.sizeduration)\n                .attr(\"r\", d => d.radius());\n        }\n\n        if (changelayout) {\n            this.svg().select(\".content\")\n                .selectAll(\"circle\")\n                .transition(\"change layout\")\n                .delay(this.delay)\n                .duration(this.duration)\n                .attr(\"cx\", d => d.x())\n                .attr(\"cy\", d => d.y())\n                .attr(\"r\", d => d.radius())\n                .style(\"opacity\", d => d.opacity());\n        }\n        this.delay += (changecolor? this.colorduration: 0) + (changesize? this.sizeduration: 0) + (changelayout? this.duration: 0)\n\n    }\n\n}\n\nexport default Unitvis;","import MarkType from '../visualization/marktype';\nimport Action from './action';\nimport { BarChart, LineChart, Scatterplot, Unitvis } from '../charts';\n\nclass AddChart extends Action {\n    constructor(spec) {\n        super(spec);\n        this._mark = spec.mark;\n    }\n\n    operate(vis) {\n        \n        vis._mark = this._mark;\n        let factdata = vis.factdata();\n        let fact = vis.fact();\n        vis.chart(this._mark2chart(this._mark));\n        // let chart = this._type2chart(spec.type);\n        let chart = vis.chart();\n        chart.height(vis._height);\n        chart.width(vis._width);\n        chart.data(vis._data);\n        chart.factdata(factdata);\n        chart.processedData(vis._processedData)\n        chart.subspace(fact.subspace);\n        chart.measure(fact.measure);\n        chart.breakdown(fact.breakdown);\n        chart.focus(fact.focus);\n        chart.container(vis._container);\n        chart.clear();\n        chart.visualize();\n    }\n\n    _mark2chart(type) {\n        switch (type) {\n            case MarkType.POINT:\n                return new Scatterplot();\n            case MarkType.BAR:\n                return new BarChart();\n            case MarkType.LINE:\n                return new LineChart();\n            case MarkType.UNIT:\n                return new Unitvis();\n            default:\n                return new Scatterplot();\n        }\n    }\n}\n\nexport default AddChart;","export default {\n    ARROW: 'arrow',\n    COLOREDAREA: 'coloredarea',\n    CIRCLE: 'circle',\n    CONTOUR: 'contour',\n    CLUSTER: 'cluster',\n    DESATURATE: 'desaturate',\n    DISTRIBUTION: 'distribution',\n    ELLIPSE: 'ellipse',\n    FADE: 'fade',\n    FILL: 'fill',\n    GLOW: 'glow',\n    HIDE: 'hide',\n    LABEL: 'label',\n    LINE: 'line',\n    POINT: 'point',\n    REFERENCE: 'reference',\n    REGRESSION: 'regression',\n    SEPARATE: 'separate',\n    SHOW: 'show',\n    SYMBOL: 'symbol',\n    TEXTURE: 'texture',\n    TIP: 'tip'\n}","class Annotator {\n\n    annotate(chart, target, style) {}\n\n}\n\nexport default Annotator","import Annotator from './annotator'\nimport Color from '../../visualization/color';\nimport * as d3 from 'd3';\n\n\nclass Arrow extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n\n        // if the focus defined in the spec does not exist\n        if (focus_elements.empty()) {\n            return;\n        }\n\n        const arrow_points = [\n            [0, 0],\n            [20, 5],\n            [15, 10],\n            [25, 20],\n            [20, 25],\n            [10, 15],\n            [5, 20],\n            [0, 0]\n        ];\n\n        focus_elements.nodes().forEach((one_element) => {\n            // identify the position\n            let data_x, data_y, offset;\n            const nodeName = one_element.nodeName;\n            if (nodeName === \"circle\") { // get center \n                data_x = parseFloat(one_element.getAttribute(\"cx\"));\n                data_y = parseFloat(one_element.getAttribute(\"cy\"));\n                offset = parseFloat(one_element.getAttribute(\"r\")) / 1.414; // √2 ~ 1.414\n            } else if (nodeName === \"rect\") {\n                offset = parseFloat(one_element.getAttribute(\"width\")) / 2;\n                data_x = parseFloat(one_element.getAttribute(\"x\")) + offset;\n                data_y = parseFloat(one_element.getAttribute(\"y\"));\n            } else { // currently not support\n                return;\n            }\n\n            // move the arrow to the data point\n            const new_arrow_points = arrow_points.map((point) => [data_x + offset + point[0], data_y + offset + point[1]]);\n\n            // draw arrow\n            svg.append(\"path\")\n                .attr(\"class\", \"arrow\")\n                .attr(\"d\", d3.line()(new_arrow_points))\n                .attr(\"fill\", () => {\n                    if (\"color\" in style) {\n                        return style[\"color\"];\n                    } else {\n                        return Color().ANNOTATION;\n                    }\n                });\n        })\n\n\n    }\n}\n\nexport default Arrow","import * as d3 from 'd3';\nimport Annotator from './annotator'\nimport Color from '../../visualization/color';\n\nclass Band extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function () {\n            return this.each(function () {\n                this.parentNode.appendChild(this);\n            });\n        };\n        const selected = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n\n        const padding = 10;\n        selected.nodes().forEach(item => {\n            if (item.nodeName === \"circle\") {\n                let circleR = Number(item.getAttribute(\"r\")) + padding,\n                    circleX = item.getAttribute(\"cx\"),\n                    circleY = item.getAttribute(\"cy\");\n\n                svg.select(\".content\").select(\".circleGroup\").append(\"circle\")\n                    .attr(\"fill\", Color().ANNOTATION)\n                    .attr(\"opacity\", 0.3)\n                    .attr(\"stroke-width\", 0)\n                    .attr(\"x\", circleX)\n                    .attr(\"y\", circleY)\n                    .attr(\"transform\", \"translate(\" + circleX + \",\" + circleY + \")\")\n                    .attr(\"r\", circleR)\n                svg.select(\".lineGroup\").moveToFront();\n\n            } else if (item.nodeName === \"rect\") {\n                let rectX = Number(item.getAttribute(\"x\")) - padding,\n                    rectY = Number(item.getAttribute(\"y\")) - padding,\n                    width = Number(item.getAttribute(\"width\")) + padding * 2,\n                    height = Number(item.getAttribute(\"height\")) + padding;\n\n                svg.select(\".content\").select(\"g\").append(\"rect\")\n                    .attr(\"fill\", Color().ANNOTATION)\n                    .attr(\"opacity\", 0.3)\n                    .attr(\"stroke-width\", 0)\n                    .attr(\"x\", rectX)\n                    .attr(\"y\", rectY)\n                    .attr(\"width\", width)\n                    .attr(\"height\", height)\n            }\n\n        });\n        selected.moveToFront();\n    }\n}\n\nexport default Band","import Annotator from './annotator'\nimport Color from '../../visualization/color';\n\nclass Circle extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let selected = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n\n        const padding = 5;\n        selected.nodes().forEach(item => {\n            if (item.nodeName === \"circle\") {\n                let circleR = Number(item.getAttribute(\"r\")) + padding,\n                    circleX = item.getAttribute(\"cx\"),\n                    circleY = item.getAttribute(\"cy\");\n\n                svg.append(\"circle\")\n                    .attr(\"fill\", \"none\")\n                    .attr(\"stroke\", function(d) {\n                        if ('color' in style) {\n                            return style['color']\n                        } else {\n                            return Color().ANNOTATION\n                        }\n                    })\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"x\", circleX)\n                    .attr(\"y\", circleY)\n                    .attr(\"transform\", \"translate(\" + circleX + \",\" + circleY + \")\")\n                    .attr(\"r\", circleR)\n            } else if (item.nodeName === \"rect\") {\n                let circleY = item.getAttribute(\"y\"),\n                    width = item.getAttribute(\"width\"),\n                    circleX = Number(item.getAttribute(\"x\")) + width / 2,\n                    circleR = width / 2 + padding;\n                svg.append(\"circle\")\n                    .attr(\"fill\", \"none\")\n                    .attr(\"stroke\", function(d) {\n                        if ('color' in style) {\n                            return style['color']\n                        } else {\n                            return Color().ANNOTATION\n                        }\n                    })\n                    .attr(\"stroke-width\", 2)\n                    .attr(\"x\", circleX)\n                    .attr(\"y\", circleY)\n                    .attr(\"transform\", \"translate(\" + circleX + \",\" + circleY + \")\")\n                    .attr(\"r\", circleR)\n            }\n\n        });\n    }\n}\n\nexport default Circle","import * as d3 from 'd3';\nimport Color from '../../visualization/color';\nimport Annotator from './annotator';\n\nclass Contour extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .attr(\"stroke-width\", 2)\n            .attr(\"stroke-alignment\", \"outer\")\n            .attr(\"opacity\", 1)\n            .attr(\"stroke\", function() {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n            .moveToFront();\n\n    }\n}\n\nexport default Contour;","import * as d3 from 'd3';\nimport Color from '../../visualization/color';\nimport Annotator from './annotator';\nimport numeric from 'numeric';\nimport jStat from 'jstat';\n\n// Inspired by https://plnkr.co/edit/iLNvpm?preview\n// http://www.cs.utah.edu/~tch/CS4300/resources/refs/ErrorEllipses.pdf\n\nclass Cluster extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n        if (focus_elements.empty()) return;\n        let clustered_items = target[0]['items'];\n        let colors = new Set(clustered_items.map(x => x['color']))\n        let text;\n        if (colors.size > 1) {\n          text = `These data points in the circle are annotated as a cluster due to the density. They belong to ${colors.size} different categories.`;\n        } else {\n          text = `These data points in the circle are annotated as a cluster due to the density. They all belong to 1 category.`;\n        }\n        let tooltip_id = `${chart.container()}-tooltip`;\n        let Tooltip = d3.select(tooltip_id).html(text);\n        var mouseover = function(d) {\n            Tooltip\n            .html(text)\n            .style(\"opacity\", 1)\n            d3.select(this)\n            .style(\"stroke\", \"black\")\n        }\n        var mouseout = function(d) {\n            Tooltip\n            .html(\"<p>You could hover over an annotation to see the caption.<p/>\")\n            d3.select(this)\n            .style(\"stroke\",  function(d) {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n        }\n\n        // step 1: get all focused elements position\n        let xEncoding = chart.x;\n        let yEncoding = chart.y;\n        let xs = [];\n        let ys = [];\n        for(let focus_element of focus_elements.nodes()) {\n            xs.push(focus_element.__data__[xEncoding]);\n            ys.push(focus_element.__data__[yEncoding]);\n        }\n        let p = 0.95;\n        if ('p' in style) {\n            p = style['p']\n        }\n        let computed_parameter = this.compute(xs, ys, p);\n        let xExtent = d3.extent(xs);\n        let yExtent = d3.extent(ys);\n        \n        let cx = computed_parameter['cx'], cy = computed_parameter['cy'], rx = computed_parameter['rx'], ry = computed_parameter['ry'];\n        rx = Math.abs(chart.xScale()(xExtent[0] + computed_parameter['rx']) - chart.xScale()(xExtent[0]))\n        ry = Math.abs(chart.yScale()(yExtent[0] + computed_parameter['ry']) - chart.yScale()(yExtent[0]))\n        let rotation = computed_parameter['rotation'];\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        if (cx !== undefined && cy !== undefined && rx !== undefined && ry !== undefined && rotation !== undefined) {\n            svg.append(\"ellipse\")\n                .attr(\"fill\", \"none\")\n                .attr(\"cx\", chart.xScale()(cx))\n                .attr(\"cy\", chart.yScale()(cy))\n                .attr(\"rx\", rx)\n                .attr(\"ry\", ry)\n                .attr(\"stroke-width\", 3)\n                .attr(\"stroke\", function(d) {\n                    if ('color' in style) {\n                        return style['color']\n                    } else {\n                        return Color().ANNOTATION\n                    }\n                })\n                \n                .attr(\"transform\", \"rotate(\" + rotation + \",\" + chart.xScale()(cx) + \",\" + chart.yScale()(cy) + \")\").on(\"mouseover\", mouseover)\n                .on(\"mouseout\", mouseout);\n\n        } else {\n            console.log('incorrect spec');\n        }\n        \n    }\n\n    indexOfMax = function(data) {\n        var max = data[0],\n          index = 0;\n        for (var d in data) {\n          if (data[d] > max) {\n            max = data[d];\n            index = d;\n          }\n        }\n        return index;\n      };\n      \n    indexOfMin = function(data) {\n        var min = data[0],\n          index = 0;\n        for (var d in data) {\n          if (data[d] < min) {\n            min = data[d];\n            index = d;\n          }\n        }\n        return index;\n      };\n\n    compute(xs, ys, p = 0.9) {\n        let stdDevX = d3.deviation(xs);\n        let stdDevY = d3.deviation(ys);\n        let cor = jStat.corrcoeff(xs, ys);\n        let center = {\n            x: d3.mean(xs),\n            y: d3.mean(ys)\n        };\n        let level = p\n        let xExtent = d3.extent(xs);\n        let yExtent = d3.extent(ys);\n        let ar = (d3.mean(ys) / (yExtent[1] - yExtent[0]))/(d3.mean(xs) / (xExtent[1] - xExtent[0]));\n        return this.errorEllipse(stdDevX, stdDevY, cor, center, level, ar)\n    }\n\n    errorEllipse = function(stdDevX, stdDevY, cor, center, level, aspectRatio) {\n        var errEllipse,\n          cov = cor * stdDevX * stdDevY,\n          covmat = [\n            [stdDevX * stdDevX, cov],\n            [cov, stdDevY * stdDevY]\n          ],\n          eig = numeric.eig(covmat),\n          scale = Math.sqrt(jStat.chisquare.inv(level, 2)),\n          maxLambdaI = this.indexOfMax(eig.lambda.x),\n          minLambdaI = this.indexOfMin(eig.lambda.x),\n          rx = stdDevX > stdDevY ? Math.sqrt(eig.lambda.x[maxLambdaI]) * scale : Math.sqrt(eig.lambda.x[minLambdaI]) * scale,\n          ry = stdDevY > stdDevX ? Math.sqrt(eig.lambda.x[maxLambdaI]) * scale : Math.sqrt(eig.lambda.x[minLambdaI]) * scale,\n          theta =  0.5 * Math.atan((1 / aspectRatio) * ((2 * cov) / (Math.pow(stdDevX,2) - Math.pow(stdDevY, 2))));\n        \n        // console.log(theta * 180 / Math.PI)\n\n        if (theta < 0) {\n            theta += 2 * Math.PI\n        }\n        \n        //make the ellipse object\n        errEllipse = {\n          'rx': rx,\n          'ry': ry,\n          'cx': center.x,\n          'cy': center.y,\n          'rotation': - (theta * 180 / Math.PI)\n        };\n        return errEllipse;\n      };\n\n}\n\nexport default Cluster","import * as d3 from 'd3';\nimport Color from '../../visualization/color';\nimport Annotator from './annotator'\n\nclass Fill extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .attr(\"fill\", function(d) {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n            .attr(\"opacity\", 1)\n            .moveToFront();\n    }\n}\n\nexport default Fill","import Annotator from './annotator'\n\nclass Desaturate extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .attr(\"fill\", \"lightgray\")\n            .attr(\"opacity\", 1)\n    }\n}\n\nexport default Desaturate","import Annotator from './annotator';\nimport * as d3 from 'd3';\nimport Color from '../../visualization/color';\n\nclass Distribution extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .attr(\"opacity\", 0.3);\n\n        if (focus_elements.empty()) return;\n\n        // step 1: get all focused elements position\n        let positions = [];\n        focus_elements.nodes().forEach(one_element => {\n            let data_x, data_y;\n            const nodeName = one_element.nodeName;\n            if (nodeName === \"circle\") {\n                data_x = parseFloat(one_element.getAttribute(\"cx\"));\n                data_y = parseFloat(one_element.getAttribute(\"cy\"));\n            } else if (nodeName === \"rect\") {\n                data_x = parseFloat(one_element.getAttribute(\"x\")) + parseFloat(one_element.getAttribute(\"width\")) / 2;\n                data_y = parseFloat(one_element.getAttribute(\"y\"));\n            }\n            if (!isNaN(data_x) && !isNaN(data_y)) {\n                positions.push([data_x, data_y]);\n            }\n        })\n\n        // step2: draw curve \n        let line_generator = d3.line()\n            .x(d => d[0]) \n            .y(d => d[1])\n            .curve(d3.curveCatmullRom);\n\n        svg.append(\"path\")\n            .attr(\"class\", \"regression\")\n            .attr(\"d\", line_generator(positions))\n            .attr(\"stroke\", () => {\n                if (\"color\" in style) {\n                    return style[\"color\"];\n                } else {\n                    return Color().ANNOTATION;\n                }\n            })\n            .attr(\"stroke-width\", 3)\n            .attr(\"fill\", \"none\");\n\n    }\n}\n\nexport default Distribution;","import * as d3 from 'd3';\nimport Color from '../../visualization/color';\nimport Annotator from './annotator'\n\nclass Ellipse extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        let cx = target['cx'], cy = target['cy'], rx = target['rx'], ry = target['ry'];\n        let angle = 0;\n        if ('angle' in target) { angle = target['angle']; }\n        if (cx !== undefined && cy !== undefined && rx !== undefined && ry !== undefined) {\n            console.log('append')\n            svg.append(\"ellipse\")\n                .attr(\"fill\", \"none\")\n                .attr(\"cx\", chart.xScale()(cx))\n                .attr(\"cy\", chart.yScale()(cy))\n                .attr(\"rx\", chart.rxScale()(rx))\n                .attr(\"ry\", chart.ryScale()(ry))\n                .attr(\"stroke-width\", 5)\n                .attr(\"stroke\", function(d) {\n                    if ('color' in style) {\n                        return style['color']\n                    } else {\n                        return Color().ANNOTATION\n                    }\n                })\n                .attr(\"transform\", \"rotate(\" + angle * (180/Math.PI) + \",\" + chart.xScale()(cx) + \",\" + chart.yScale()(cy) + \")\");\n\n            // TODO: Label items if pointing a ata item\n\n        } else {\n            console.log('incorrect spec');\n        }\n        \n    }\n}\n\nexport default Ellipse","import Annotator from './annotator'\n\nclass Fade extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .attr(\"opacity\", 0.3)\n    }\n}\n\nexport default Fade","import Color from '../../visualization/color';\nimport Annotator from './annotator'\n\nclass Glow extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        var defs = svg.append(\"defs\");\n        var filter = defs.append(\"filter\")\n            .attr(\"id\", \"drop-shadow\")\n            .attr(\"height\", \"150%\");\n\n        filter.append(\"feGaussianBlur\")\n            .attr(\"in\", \"StrokePaint\")\n            // .attr(\"in\", \"SourceAlpha\")\n            .attr(\"stdDeviation\", 2)\n            .attr(\"result\", \"blur\");\n\n        filter.append(\"feOffset\")\n            .attr(\"in\", \"blur\")\n            .attr(\"dx\", 0)\n            .attr(\"dy\", 0)\n            .attr(\"result\", \"offsetBlur\");\n\n        var feMerge = filter.append(\"feMerge\");\n\n\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"offsetBlur\")\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"SourceGraphic\");\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"FillPaint\");\n\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .style(\"stroke\",  function() {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n            .style(\"stroke-width\", 2)\n            .style(\"filter\", \"url(#drop-shadow)\")\n            .attr(\"opacity\", 1)\n    }\n}\n\nexport default Glow;","import * as d3 from 'd3';\nimport Annotator from './annotator'\n\nclass Hide extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .attr(\"opacity\", 0);\n    }\n}\n\nexport default Hide","import Annotator from './annotator';\nimport { Scatterplot } from '../../charts';\nimport Color from '../../visualization/color';\n\nclass Label extends Annotator {\n    annotate(chart, target, style) {\n      \n        let svg = chart.svg();\n        // const measure = chart.measure();\n        // const breakdown = chart.breakdown()\n        // let yEncoding;\n        // if(chart instanceof Scatterplot) {\n        //     yEncoding = breakdown[0].field;\n        // } else {\n        //     yEncoding = measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field;\n        // }\n\n        let yEncoding = chart.y.field;\n        // console.log('yEncoding', yEncoding)\n         \n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n        \n        // if the focus defined in the spec does not exist\n        if (focus_elements.length === 0) {\n            return;\n        }\n\n        for(let focus_element of focus_elements.nodes()) {\n           \n            // get node data info\n            let formatData\n            if (\"text\" in style) {\n                formatData = style[\"text\"];\n            } else if (chart instanceof Scatterplot) {\n                formatData = focus_element.__data__[yEncoding]\n            } else {\n                let data_d = parseFloat(focus_element.__data__[yEncoding]);\n                if ((data_d / 1000000) >= 1) {\n                    formatData = data_d / 1000000 + \"M\";\n                } else if ((data_d / 1000) >= 1) {\n                    formatData = data_d / 1000 + \"K\";\n                }else {\n                    formatData = data_d + \"\";\n                }\n            }\n\n            // identify the position\n            let data_x, data_y, data_r, offset_y;\n            const nodeName = focus_element.nodeName;\n            if (nodeName === \"circle\") { // get center\n                data_x = parseFloat(focus_element.getAttribute(\"cx\"));\n                data_y = parseFloat(focus_element.getAttribute(\"cy\"));\n                data_r = parseFloat(focus_element.getAttribute(\"r\"));\n                offset_y = - data_r - 10;\n            } else if (nodeName === \"rect\") {\n                const bbox = focus_element.getBBox();\n                data_x = bbox.x + bbox.width / 2;\n                data_y = bbox.y;\n                offset_y = -10;\n            } else { // currently not support\n                return;\n            }\n\n            // draw text\n            svg.append(\"text\")\n                .attr(\"class\", \"text\")\n                .attr(\"x\", data_x)\n                .attr(\"y\", data_y + offset_y)\n                .text(formatData)\n                .attr(\"font-size\", () => {\n                    if (\"font-size\" in style) {\n                        return style[\"font-size\"];\n                    } else {\n                        return 12;\n                    }\n                })\n                .attr(\"fill\", () => {\n                    if (\"color\" in style) {\n                        return style[\"color\"];\n                    } else {\n                        return Color().TEXT;\n                    }\n                })\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"alignment-baseline\", \"Alphabetic\");\n        \n        }   \n            \n    }\n}\n\nexport default Label;","import * as d3 from 'd3';\nimport Color from '../../visualization/color';\nimport Annotator from './annotator'\n\nclass Line extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        let tooltip_id = `${chart.container()}-tooltip`;\n        let Tooltip = d3.select(tooltip_id);\n        let pr = target['pr'];\n        let pvalue = target['pvalue']\n        let relationship_text = \"\"\n        if (pr <= -0.7) {\n            relationship_text = \"a strong negative linear relationship\";\n        } else if (pr >= 0.7) {\n            relationship_text = \"a strong positive linear relationship\";\n        } else if (pr > -0.7 && pr <= -0.3) {\n            relationship_text = \"a moderate negative linear relationship\";\n        } else if (pr < 0.7 && pr >= 0.3) {\n            relationship_text = \"a moderate positive linear relationship\";\n        } else {\n            relationship_text = \"a weak relationship\"\n        }\n        Tooltip\n            .html(`The data points in this category has ${relationship_text}. The probability of the correlation is about ${((1-pvalue)*100).toFixed(2)}%.`);\n        var mouseover = function(d) {\n            Tooltip\n            .html(`The data points in this category has ${relationship_text}. The probability of the correlation is about ${((1-pvalue)*100).toFixed(2)}%.`)\n            .style(\"opacity\", 1)\n            d3.select(this)\n            .style(\"stroke\", \"black\")\n        }\n        var mouseout = function(d) {\n            Tooltip\n            .html(\"<p>You could hover over an annotation to see the caption.<p/>\")\n            .style(\"opacity\", 1)\n            d3.select(this)\n            .style(\"stroke\",  function(d) {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n        }\n        let x1 = target['x1'], y1 = target['y1'], x2 = target['x2'], y2 = target['y2'];\n        if (x1 !== undefined && y1 !== undefined && x2 !== undefined && y2 !== undefined) {\n            svg.append(\"line\")\n                .attr(\"class\", \"line\")\n                .attr(\"x1\", chart.xScale()(x1))\n                .attr(\"x2\", chart.xScale()(x2))\n                .attr(\"y1\", chart.yScale()(y1))\n                .attr(\"y2\", chart.yScale()(y2))\n                .attr(\"stroke\", function(d) {\n                    if ('color' in style) {\n                        return style['color']\n                    } else {\n                        return Color().ANNOTATION\n                    }\n                })\n                .attr(\"stroke-width\", 3)\n                .on(\"mouseover\", mouseover)\n                .on(\"mouseout\", mouseout);\n\n        } else {\n            console.log('incorrect spec');\n        };\n    }\n}\n\nexport default Line","import * as d3 from 'd3';\nimport Color from '../../visualization/color';\nimport Annotator from './annotator'\n\nclass Point extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        let x = target['x'], y = target['y'];\n        let outlier_probability = target['outlier_probability'];\n        const circleSize = 8;\n        let xScale = chart.xScale();\n        let yScale = chart.yScale();\n        if (x !== undefined && y !== undefined) {\n            let tooltip_id = `${chart.container()}-tooltip`;\n            let Tooltip = d3.select(tooltip_id).html(`This item (${x},${y}) is annotated as an outlier. <br/>The outlier probability is ${(outlier_probability*100).toFixed(2)}%.`);\n            var mouseover = function(d) {\n                Tooltip\n                .html(`This item (${x},${y}) is annotated as an outlier. <br/>The outlier probability is ${(outlier_probability*100).toFixed(2)}%.`)\n                .style(\"opacity\", 1)\n                d3.select(this)\n                .style(\"stroke\", \"black\")\n            }\n            var mouseout = function(d) {\n                Tooltip\n                .html(\"<p>You could hover over an annotation to see the caption.<p/>\")\n                .style(\"opacity\", 1)\n                d3.select(this)\n                .style(\"stroke\",  function(d) {\n                    if ('color' in style) {\n                        return style['color']\n                    } else {\n                        return Color().ANNOTATION\n                    }\n                })\n            }\n            svg.append(\"circle\")\n                .attr(\"class\", \"point\")\n                .attr(\"r\", circleSize)\n                .attr(\"stroke\",function(d) {\n                    if ('color' in style) {\n                        return style['color']\n                    } else {\n                        return Color().ANNOTATION\n                    }\n                })\n                .attr(\"stroke-width\", 3)\n                .attr(\"fill\",\"transparent\")\n                .attr(\"opacity\", 1)\n                .attr(\"cx\", xScale(x))\n                .attr(\"cy\", yScale(y))\n                .on(\"mouseover\", mouseover)\n                .on(\"mouseout\", mouseout);;\n\n            // TODO: Label items if pointing a ata item\n\n        } else {\n            console.log('incorrect spec');\n        }\n        \n    }\n}\n\nexport default Point","import Annotator from './annotator';\nimport Color from '../../visualization/color';\n\nclass Reference extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n\n        if (focus_elements.empty()) return;\n\n        // step 1: get all focused elements position\n        let positions = [];\n        focus_elements.nodes().forEach(one_element => {\n            let data_x, data_y;\n            const nodeName = one_element.nodeName;\n            if (nodeName === \"circle\") {\n                data_x = parseFloat(one_element.getAttribute(\"cx\"));\n                data_y = parseFloat(one_element.getAttribute(\"cy\"));\n            } else if (nodeName === \"rect\") {\n                data_x = parseFloat(one_element.getAttribute(\"x\")) + parseFloat(one_element.getAttribute(\"width\")) / 2;\n                data_y = parseFloat(one_element.getAttribute(\"y\"));\n            }\n            if (data_x && data_y) {\n                positions.push([data_x, data_y]);\n            }\n        })\n\n        // step 2: get content range\n        // range on X\n        let x_axis_path = svg.selectAll('.axis_x').select(\".domain\");\n        let x_axis_bbox = x_axis_path.node().getBBox();\n        let x_lower_bound = x_axis_bbox.x;\n        let x_upper_bound = x_lower_bound + x_axis_bbox.width;\n\n        // step 3: get value line parameters\n        // params for value line\n        let x1, x2, y1, y2;\n\n        // process params for value line \n        if (positions.length === 1) { // horizontal line\n            y1 = positions[0][1];\n            y2 = y1;\n\n            x1 = x_lower_bound;\n            x2 = x_upper_bound;\n        } else { // calculate value \n            const mean = this.getAverageValue(positions);\n\n            y1 = mean;\n            y2 = y1;\n\n            x1 = x_lower_bound;\n            x2 = x_upper_bound;\n        }\n\n        // step 4: draw value line\n        svg.append(\"line\")\n            .attr(\"class\", \"value\")\n            .attr(\"x1\", x1)\n            .attr(\"x2\", x2)\n            .attr(\"y1\", y1)\n            .attr(\"y2\", y2)\n            .attr(\"stroke\", function() {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n            .attr(\"stroke-width\", 2)\n            .attr(\"stroke-dasharray\", \"8, 4\");\n\n    }\n\n    /**\n     * average value on given data points\n     * @param {*} points positions of points to draw a value line\n     * @returns average value\n     */\n    getAverageValue(points) {\n        let sumY = 0\n        let N = points.length\n\n        for (let i = 0; i < N; ++i) {\n            sumY += points[i][1]\n        }\n\n        return sumY/N;\n    }\n}\n\nexport default Reference;","import Annotator from './annotator';\nimport Color from '../../visualization/color';\n\nclass Regression extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n\n        if (focus_elements.empty()) return;\n\n        // step 1: get all focused elements position\n        let positions = [];\n        focus_elements.nodes().forEach(one_element => {\n            let data_x, data_y;\n            const nodeName = one_element.nodeName;\n            if (nodeName === \"circle\") {\n                data_x = parseFloat(one_element.getAttribute(\"cx\"));\n                data_y = parseFloat(one_element.getAttribute(\"cy\"));\n            } else if (nodeName === \"rect\") {\n                data_x = parseFloat(one_element.getAttribute(\"x\")) + parseFloat(one_element.getAttribute(\"width\")) / 2;\n                data_y = parseFloat(one_element.getAttribute(\"y\"));\n            }\n            if (data_x && data_y) {\n                positions.push([data_x, data_y]);\n            }\n        })\n\n        // step 2: get content range\n        // range on X\n        let x_axis_path = svg.selectAll('.axis_x').select(\".domain\");\n        let x_axis_bbox = x_axis_path.node().getBBox();\n        let x_lower_bound = x_axis_bbox.x;\n        let x_upper_bound = x_lower_bound + x_axis_bbox.width;\n\n        // range on Y\n        let y_axis_path = svg.selectAll('.axis_y').select(\".domain\");\n        let y_axis_bbox = y_axis_path.node().getBBox();\n        let y_lower_bound = y_axis_bbox.y;\n        let y_upper_bound = y_lower_bound + y_axis_bbox.height;\n\n        // step 3: get regression line parameters\n        // params for regression line\n        let x1, x2, y1, y2;\n\n        // process params for regression line \n        if (positions.length === 1) { // horizontal line\n            y1 = positions[0][1];\n            y2 = y1;\n\n            x1 = x_lower_bound;\n            x2 = x_upper_bound;\n        } else { // calculate regression \n            const ret = this.getLeastSquares(positions);\n            let x_ymin = (y_upper_bound - y_lower_bound - ret.b) / ret.m,\n                x_ymax = (0 - ret.b) / ret.m;\n\n            if (x_ymin > x_ymax) {\n                [x_ymin, x_ymax] = [x_ymax, x_ymin];\n            }\n\n            x1 = x_lower_bound;\n            x2 = x_upper_bound;\n            x1 = x1 < x_ymin ? x_ymin : x1;\n            x2 = x2 > x_ymax ? x_ymax : x2;\n            if (ret.m === 0) x1 = 0;\n            y1 = ret.m * x1 + ret.b;\n            y2 = ret.m * x2 + ret.b;\n            if (ret.m === -Infinity) {\n                x1 = x2;\n                y1 = y_lower_bound;\n                y2 = y_upper_bound;\n            }\n        }\n\n        // step 4: draw regression line\n        svg.append(\"line\")\n            .attr(\"class\", \"regression\")\n            .attr(\"x1\", x1)\n            .attr(\"x2\", x2)\n            .attr(\"y1\", y1)\n            .attr(\"y2\", y2)\n            .attr(\"stroke\", () => {\n                if (\"color\" in style) {\n                    return style[\"color\"];\n                } else {\n                    return Color().ANNOTATION;\n                }\n            })\n            .attr(\"stroke-width\", 2)\n            .attr(\"stroke-dasharray\", \"8, 4\");\n\n    }\n\n    /**\n     * least squares on given data points\n     * @param {*} points positions of points to draw a regression line\n     * @returns ret {m: gradient, b: intercept}\n     */\n    getLeastSquares(points) {\n        let ret = {}\n\n        let sumX = 0\n        let sumY = 0\n        let sumXY = 0\n        let sumXSq = 0\n        let N = points.length\n\n        for (let i = 0; i < N; ++i) {\n            sumX += points[i][0]\n            sumY += points[i][1]\n            sumXY += points[i][0] * points[i][1]\n            sumXSq += points[i][0] * points[i][0]\n        }\n\n        ret.m = ((sumXY - sumX * sumY / N)) / (sumXSq - sumX * sumX / N)\n        ret.b = sumY / N - ret.m * sumX / N\n\n        return ret;\n    }\n}\n\nexport default Regression;","import Annotator from './annotator'\n\nclass Separate extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n    }\n}\n\nexport default Separate;","import * as d3 from 'd3';\nimport Annotator from './annotator'\n\nclass Show extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .attr(\"opacity\", 1);\n    }\n}\n\nexport default Show","import Annotator from './annotator';\n\nclass Symbol extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n        \n        // if the focus defined in the spec does not exist\n        if (focus_elements.length === 0) {\n            return;\n        }\n\n        for(let focus_element of focus_elements.nodes()) {\n\n            // identify the position\n            let data_x, data_y, data_r, offset_y;\n            const size_icon = 20;\n            const nodeName = focus_element.nodeName;\n            if (nodeName === \"circle\") { // get center\n                data_x = parseFloat(focus_element.getAttribute(\"cx\"));\n                data_y = parseFloat(focus_element.getAttribute(\"cy\"));\n                data_r = parseFloat(focus_element.getAttribute(\"r\"));\n                offset_y = - data_r - size_icon;\n            } else if (nodeName === \"rect\") {\n                const bbox = focus_element.getBBox();\n                data_x = bbox.x + bbox.width / 2;\n                data_y = bbox.y;\n                offset_y = 10;\n            } else { // currently not support\n                return;\n            }\n\n            // append icon\n            svg.append(\"image\")\n                .attr(\"class\", \"icon-img\")\n                .attr(\"x\", data_x - size_icon / 2)\n                .attr(\"y\", data_y + offset_y)\n                .attr(\"width\", size_icon)\n                .attr(\"height\", size_icon)\n                .attr(\"xlink:href\", () => {\n                    if(\"icon-url\" in style) {\n                        return style[\"icon-url\"];\n                    } else {\n                        return ;\n                    }\n                })\n        \n        }   \n            \n    }\n}\n\nexport default Symbol;","import * as d3 from 'd3';\nimport Annotator from './annotator'\nclass Texture extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        var config = {\n            \"texture_size\" : 300\n        }\n        var defs = svg.append('svg:defs');\n        defs.append(\"svg:pattern\")\n            .attr(\"id\", \"texture_background\")\n            .attr(\"width\", config.texture_size)\n            .attr(\"height\", config.texture_size)\n            .attr(\"patternUnits\", \"userSpaceOnUse\")\n            .append(\"svg:image\")\n            .attr(\"xlink:href\", style[\"background-image\"])\n            .attr(\"x\", 0)\n            .attr(\"y\", 0);\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .style(\"fill\", \"url(#texture_background)\")\n            .moveToFront();\n    }\n}\n\nexport default Texture;","import Annotator from './annotator'\n\nclass Tip extends Annotator {\n    annotate(chart, target, style) {\n        \n    }\n}\n\nexport default Tip","import Action from './action';\nimport AnnotationType from '../visualization/annotationtype';\nimport {Arrow, Coloredarea, Circle, Contour, Cluster, Desaturate, Distribution, Fade, Fill, Glow, Hide, Label, Line, Point, Reference, Regression, Separate, Show, Symbol, Texture, Tip} from './annotations'\nimport Ellipse from './annotations/ellipse';\n\nclass AddAnnotation extends Action {\n    constructor(spec) {\n        super(spec);\n        this._method = spec.method;\n        if ('target' in spec) {\n            this._target = spec.target;\n        } else {\n            this._target = []\n        }\n        if ('style' in spec) {\n            this._style = spec.style;\n        } else {\n            this._style = {}\n        }\n    }\n\n    operate(vis) {\n        let annotator = this._type2annotator(this._method)\n        let chart = vis.chart();\n        let target = this._target;\n        let style = this._style;\n        annotator.annotate(chart, target, style);\n    }\n\n    _type2annotator(type) {\n        switch (type) {\n            case AnnotationType.ARROW:\n                return new Arrow()\n            case AnnotationType.COLOREDAREA:\n                return new Coloredarea()\n            case AnnotationType.CIRCLE:\n                return new Circle()\n            case AnnotationType.CONTOUR:\n                return new Contour()\n            case AnnotationType.CLUSTER:\n                return new Cluster()\n            case AnnotationType.DESATURATE:\n                return new Desaturate()\n            case AnnotationType.DISTRIBUTION:\n                return new Distribution()\n            case AnnotationType.ELLIPSE:\n                return new Ellipse()\n            case AnnotationType.FADE:\n                return new Fade()\n            case AnnotationType.FILL:\n                return new Fill()\n            case AnnotationType.GLOW:\n                return new Glow()\n            case AnnotationType.HIDE:\n                return new Hide()\n            case AnnotationType.LABEL:\n                return new Label()\n            case AnnotationType.LINE:\n                return new Line()\n            case AnnotationType.POINT:\n                return new Point()\n            case AnnotationType.REFERENCE:\n                return new Reference()\n            case AnnotationType.REGRESSION:\n                return new Regression()\n            case AnnotationType.SEPARATE:\n                return new Separate()\n            case AnnotationType.SHOW:\n                return new Show()\n            case AnnotationType.SYMBOL:\n                return new Symbol()\n            case AnnotationType.TEXTURE:\n                return new Texture()\n            case AnnotationType.TIP:\n                return new Tip()\n\n            default:\n                return new Fill();\n        }\n    }\n}\n\nexport default AddAnnotation;","import Action from './action';\n\nclass AddEncoding extends Action {\n    constructor(spec) {\n        super(spec);\n        this.channel = spec.channel;\n        this.field = spec.field\n    }\n\n    operate(vis) {\n        vis.chart().addEncoding(this.channel, this.field);\n    }\n}\n\nexport default AddEncoding;","import Action from './action';\n\nclass ModifyEncoding extends Action {\n    constructor(spec) {\n        super(spec);\n        this.channel = spec.channel;\n        this.field = spec.field\n    }\n\n    operate(vis) {\n        vis.chart().modifyEncoding(this.channel, this.field);\n    }\n}\n\nexport default ModifyEncoding;","import Action from './action';\n\nclass RemoveEncoding extends Action {\n    constructor(spec) {\n        super(spec);\n        this.channel = spec.channel;\n    }\n\n    operate(vis) {\n        vis.chart().removeEncoding(this.channel);\n    }\n}\n\nexport default RemoveEncoding;","import { AddAnnotation } from \"./actions\";\n\nclass Pipeline {\n    constructor() {\n        this._actions = []\n        this._timeouts = []\n    }\n\n    add(action) {\n        this._actions.push(action);\n    }\n\n    actions() {\n        return this._actions;\n    }\n\n    operate(vis) {\n        let delayTime = 0;\n        this.actions().forEach(action => {\n            if (action instanceof AddAnnotation) {\n                delayTime += 2000\n            }\n            this._timeouts.push(setTimeout(function(){\n                // Code to run after the pause\n                action.operate(vis);\n            }, delayTime));\n        });\n    }\n\n    stop() {\n        for (var i = 0; i < this._timeouts.length; i++) {\n            clearTimeout(this._timeouts[i]);\n        }\n    }\n}\n\nexport default Pipeline;","import Pipeline from './pipeline';\nimport { AddAnnotation, AddChart, AddEncoding, ModifyEncoding, RemoveEncoding, DataProcess } from './actions';\n\nclass Parser {\n    constructor() {\n        this._parsedData = []\n    }\n\n    parse(spec) {\n        let dataspec = spec.data ? spec.data : {};\n        let factspec = spec.fact ? spec.fact : {};\n        let focus_target = 'focus' in factspec ? factspec['focus'] : []\n        let actionspecs = spec.actions ? spec.actions : [];\n        let pipeline = new Pipeline()\n        if (actionspecs.length > 0) {\n            for (const actionspec of actionspecs) {\n                // TODO: deal with actionspec\n                let actions_to_add = [];\n                if ('add' in actionspec) {\n                    switch (actionspec['add']) {\n                        case 'chart':\n                            actions_to_add.push(new AddChart(actionspec));\n                            break;\n                        case 'annotation':\n                            if (!('target' in actionspec)) {\n                                actionspec['target'] = focus_target // default is focus\n                            }\n                            if (('method' in actionspec) && Array.isArray(actionspec['method'])) {\n                                for (const submethod of actionspec['method']) {\n                                    let subactionspec = { ...actionspec }; // copy a dict\n                                    subactionspec['method'] = submethod\n                                    let action = new AddAnnotation(subactionspec);\n                                    actions_to_add.push(action);\n                                }\n                            } else {\n                                let action = new AddAnnotation(actionspec);\n                                actions_to_add.push(action);\n                            }\n                            break;\n                        case 'encoding':\n                            actions_to_add.push(new AddEncoding(actionspec));\n                            break;\n                        default:\n                            break;\n                    }\n                } else if ('modify' in actionspec) {\n                    actions_to_add.push(new ModifyEncoding(actionspec));\n                } else if ('remove' in actionspec) {\n                    actions_to_add.push(new RemoveEncoding(actionspec));\n                }\n                else if ('select' in actionspec || 'groupby' in actionspec || 'filter' in actionspec) {\n                    // data processing\n                    actions_to_add.push(new DataProcess(actionspec));\n                }\n                for (const action of actions_to_add) {\n                    pipeline.add(action)\n                }\n            }\n        }\n        return { dataspec, factspec, pipeline };\n    }\n}\n\nexport default Parser;","import DataLoader from './dataloader';\nimport Fact from './fact';\nimport Visualization from './visualization';\nimport Parser from './parser';\n\nclass NarrativeChart {\n    constructor() {\n        this._container = document.createElement(\"div\");\n        this._paragraph = document.createElement(\"p\");\n        this._loader = new DataLoader();\n        this._fact = new Fact();\n        this._vis = new Visualization();\n        this._spec = {};\n        this._shouldShowCaption = false;\n        this.parser = new Parser();\n    }\n\n    container(value) {\n        if (!value) {\n            return this._container;\n        }\n        this._container = value;\n    }\n\n    paragraph(value) {\n        if (!value) {\n            return this._paragraph;\n        }\n        this._paragraph = value;\n    }\n\n    load(spec) {\n        this._spec = spec;\n    }\n\n    shouldShowCaption(value) {\n        if (!value) {\n            return this._shouldShowCaption;\n        }\n        this._shouldShowCaption = value;\n    }\n\n    generate() {\n        // STEP 0: parse specification\n        let spec = this._spec;\n        let { dataspec, factspec, pipeline } = this.parser.parse(spec);\n\n        // STEP 1: data\n        this._loader.load(dataspec)\n            .then((loaded) => {\n                // STEP 2: fact\n                this._fact.data(loaded.data());\n                this._fact.schema(loaded.schema());\n                return this._fact.process(factspec);\n            })\n            .then((fact) => {\n                // STEP 3: generate caption and setup visualization\n                this._vis.container(this.container());\n                this._vis.data(fact.data());\n                this._vis.fact(fact.fact());\n                this._vis.factdata(fact.factdata());\n                this._vis.pipeline(pipeline);\n                this._vis.run();\n                // this._vis.visualize(chartspec);\n            })\n            .catch((reason) => {\n                console.log(reason);\n            })\n    }\n\n    stop() {\n        this._vis.stop();\n    }\n}\n\nexport default NarrativeChart;","import React, { Component } from 'react';\nimport { NarrativeChart } from '../vis';\n\nexport default class Chart extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            showOutlier: true,\n            showCluster: true,\n            showCorrelation: true\n        }\n    }\n\n    componentDidMount() {\n        let spec = this.props.spec;\n        this.vis = new NarrativeChart();\n        let container = this.props.container;\n        this.vis.container(`#${container}`);\n        this.renderChart(spec)\n    }\n\n    componentDidUpdate() {\n        let spec = this.props.spec;\n        this.renderChart(spec)\n    }\n\n    outlier_checkbox = (e) => {\n        this.setState({\n            showOutlier: e.target.checked\n        })\n        this.renderChart(this.props.spec);\n    }\n\n    cluster_checkbox = (e) => {\n        this.setState({\n            showCluster: e.target.checked\n        })\n        this.renderChart(this.props.spec);\n    }\n\n    correlation_checkbox = (e) => {\n        this.setState({\n            showCorrelation: e.target.checked\n        })\n        this.renderChart(this.props.spec);\n    }\n\n    replay = () => {\n        this.renderChart(this.props.spec);\n    }\n\n    renderChart(spec) {\n        let newSpec = JSON.parse(JSON.stringify(spec));\n        let annotations = spec['actions'].slice(5);\n        newSpec['actions'] = spec['actions'].slice(0,5);\n        for (let index = 0; index < annotations.length; index++) {\n            const annotation = annotations[index];\n            if ((annotation[\"method\"] === \"point\" && this.state.showOutlier) || (annotation[\"method\"] === \"line\" && this.state.showCorrelation) || (annotation[\"method\"] === \"cluster\" && this.state.showCluster)) {\n                newSpec['actions'].push(annotation)\n            }\n        }\n        this.vis.stop();\n        this.vis.load(newSpec);\n        this.vis.generate();\n    }\n\n    render() {\n        let chartwidth = 400;\n        let panelwidth = 150;\n        let height = 400, width = chartwidth + panelwidth;\n        let actions = this.props.spec['actions']\n        let opacity = actions.length > 5 ? 1 : 0;\n        let line_count = 0, point_count = 0, cluster_count = 0;\n        for (const action of actions) {\n            switch (action[\"method\"]) {\n                case \"point\":\n                    point_count += 1\n                    break;\n                case \"line\":\n                    line_count += 1\n                    break;\n                case \"cluster\":\n                    cluster_count += 1\n                    break;\n                default:\n                    break;\n            }\n        }\n        let summary_text = \"To summarize the scatterplot, we \";\n        if (point_count > 0) {\n            summary_text += \"highlight \" + point_count + \" outlier point\"\n            if (point_count > 1) {summary_text += \"s\"}\n        }\n        if (line_count > 0) {\n            if (summary_text[summary_text.length - 1] !== \" \") {\n                summary_text += \", \"\n            }\n            summary_text += \"draw \" + line_count + \" correlation line\"\n            if (line_count > 1) {summary_text += \"s\"}\n        }\n        if (cluster_count > 0) {\n            if (summary_text[summary_text.length - 1] !== \" \") {\n                summary_text += \", \"\n            }\n            summary_text += \"circle \" + cluster_count + \" data cluster\"\n            if (cluster_count > 1) {summary_text += \"s\"}\n        }\n        summary_text += \".\"\n        let panel = null;\n        if (this.props.showPanel) {\n            panel = <div style={{width:panelwidth, height:\"auto\", float:\"left\", display:\"inline\"}}>\n                <p>Annotation Legend</p>\n                <p>\n                    {/* <input onChange={this.outlier_checkbox} name={1} type=\"checkbox\" id=\"scales1\" checked={this.state.showOutlier}></input>  */}\n                    < img alt=\"\" src={require('../img/outlier.png')} width={25} style={{verticalAlign: \"middle\"}}/> outlier </p >\n                <p>\n                    {/* <input onChange={this.correlation_checkbox} name={3} type=\"checkbox\" id=\"scales3\" checked={this.state.showCorrelation}></input>  */}\n                    < img alt=\"\" src={require('../img/correlation.png')} width={25} style={{verticalAlign: \"middle\"}}/> correlation</p >\n                <p>\n                    {/* <input onChange={this.cluster_checkbox} name={2} type=\"checkbox\" id=\"scales2\" checked={this.state.showCluster}></input>  */}\n                    < img alt=\"\" src={require('../img/cluster.png')} width={25} style={{verticalAlign: \"middle\"}}/> cluster </p >\n                {/* <br/>\n                <p>{summary_text}</p> */}\n                <button style={{marginLeft:2, marginTop:20,  width:60, fontSize: 14}} onClick={this.replay}>Play</button>\n            </div>\n        }\n        return (\n            <div style={{ marginLeft: 30, marginTop: 30, height: height + 100, width: width}}>\n\n                <div style={{width:chartwidth, height:\"auto\", float:\"left\", display:\"inline\"}}>\n                    <div id={this.props.container}\n                        style={{\n                            height: height,\n                            width: 420,\n                            display: \"flex\",\n                            flexDirection: \"column\",\n                            alignItems: \"center\",\n                            justifyContent: \"center\"\n                        }} />\n                    \n                    <div id={this.props.container+'-tooltip'}\n                        style={{\n                            opacity: opacity,\n                            backgroundColor: 'white',\n                            width: chartwidth-90,\n                            // height: 60,\n                            border: \"solid\",\n                            borderWidth: 2,\n                            marginLeft: 50,\n                            padding: 5\n                        }}>\n                        {/* {summary_text} */}\n                        You could hover over an annotation to see the caption.\n                    </div>\n                </div> \n                {panel}\n                {/* <div style={{width:panelwidth, height:\"auto\", float:\"left\", display:\"inline\"}}>\n                    <p>panels</p>\n                </div> */}\n\n            </div>\n        )\n    }\n}\n","import React from 'react';\nimport Chart from './Chart';\nimport './gallery.css';\n\nconst num_of_plots = 100\n\nexport default class Gallery extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {value: 1};\n    this.handleChange = this.handleChange.bind(this);\n    this.clickPrev = this.clickPrev.bind(this);\n    this.clickNext = this.clickNext.bind(this);\n    this.random = this.random.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n  }\n\n  clickPrev() {\n    let { value } = this.state;\n    if (value > 1) {\n        this.setState({value: parseInt(value) - 1});\n    } else {\n        this.setState({value: 100});\n    }\n  }\n\n  clickNext() {\n    let { value } = this.state;\n    if (value < num_of_plots) {\n        this.setState({value: parseInt(value) + 1});\n    } else {\n        this.setState({value: 1});\n    }\n  }\n\n  random() {\n    let randomNum = Math.floor(Math.random() * 100) + 1;\n    this.setState({value: randomNum});\n  }\n\n  render() {\n    const { value } = this.state;\n    let origin_spec = require(`../benchmark/${value}/origin.json`);\n    let flat_spec = require(`../benchmark/${value}/flat.json`);\n    // let baseline_spec = require(`../benchmark/${value}/baseline.json`);\n    // let origin_spec = require('../spec/test.json');\n    let originview = <Chart spec={origin_spec} container=\"origin\" showPanel={false}/>;\n    // let baselineview = <Chart spec={baseline_spec} container=\"baseline\" showPanel={false}/>;\n    let flatview = <Chart spec={flat_spec} container=\"flat\" showPanel={true}/>;\n    let plot_options = [];\n    for (let index = 1; index <= num_of_plots; index++) {\n        plot_options.push(<option value={index}>{index}</option>)\n    }\n    return (\n      <div style={{ height: \"100%\" }}>\n        <div style={{paddingLeft:65, paddingTop: 10, paddingBottom: 30, backgroundColor: \"#E8F0F8\"}}>\n          <h2>Annotating Scatterplots for Insight Communication</h2>\n          <p style={{width: 530, fontSize: 16, textAlign: \"justify\"}}>Scatterplots here are randomly generated with three colored categories. An RL agent automatically annotates them to communicate insights, including outliers, clusters, and correlations. The purpose of the agent is to help people who lack visualization literacy understand the chart at a glance.</p>\n          <div style={{fontSize: 20, fontWeight: \"normal\"}}>Plot: \n            <select style={{marginLeft:10, width:100, fontSize: 18}} value={this.state.value} onChange={this.handleChange}>\n              {plot_options}\n            </select>\n            {/* <button style={{marginLeft:10, width:60, fontSize: 14}} onClick={this.clickPrev}>Prev</button>\n            <button style={{marginLeft:2,  width:60, fontSize: 14}} onClick={this.clickNext}>Next</button> */}\n            <button style={{marginLeft:20,  width:80, fontSize: 14}} onClick={this.random}>Random</button>\n          </div>\n        </div>\n        <div>\n            {/* <div style={{width:400, height:\"auto\", float:\"left\", display:\"inline\"}}>\n                <p style={{paddingLeft:80, fontSize: 20}}>Original Plot</p>\n                {originview}\n            </div>  */}\n            {/* <div style={{width:400, height:\"auto\", float:\"left\", display:\"inline\"}}>\n                <p style={{paddingLeft:80, fontSize: 20}}>Baseline Plot</p>\n                {baselineview}\n            </div>  */}\n            <div style={{width:500, height:\"auto\", float:\"left\", display:\"inline\"}}>\n                {/* <p style={{paddingLeft:80, fontSize: 20}}>Annotated Plot (Episode Reward:)</p> */}\n                {flatview}\n            </div>\n        </div>\n      </div >\n    )\n  }\n}\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Gallery from './gallery';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Gallery />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}